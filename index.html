<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>The Permissions API</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure);  }
 *        .example::before { content: "Example " counter(example); }
 *        .issue::before   { content: "Issue "   counter(issue);   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue); } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example); } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-style:  italic; }
	.toc > li li li li    { font-style:  normal; }
	.toc > li li li li li { font-style:  italic;
	                        font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}

/******************************************************************************/
/*                                  Bikeshed                                  */
/******************************************************************************/

	/* Style for paragraphs I know are in MD-genned lists */
	/* This is a weird hack for me not yet following the commonmark spec
	   regarding paragraph and lists. */
	[data-md] > :first-child {
		margin-top: 0;
	}
	[data-md] > :last-child {
		margin-bottom: 0;
	}

/** Inline CSS fragments ******************************************************/

	.css.css, .property.property, .descriptor.descriptor {
		color: #005a9c;
		font-size: inherit;
		font-family: inherit;
	}
	.css::before, .property::before, .descriptor::before {
		content: "‘";
	}
	.css::after, .property::after, .descriptor::after {
		content: "’";
	}
	.property, .descriptor {
		/* Don't wrap property and descriptor names */
		white-space: nowrap;
	}
	.type { /* CSS value <type> */
		font-style: italic;
	}
	pre .property::before, pre .property::after {
		content: "";
	}

/** Autolinks produced using Bikeshed *****************************************/

	[data-link-type]:not([data-link-type="dfn"]),
	[data-dfn-type]:not([data-dfn-type="dfn"]) {
		hyphens: none;
	}

	[data-link-type="property"]::before,
	[data-link-type="propdesc"]::before,
	[data-link-type="descriptor"]::before,
	[data-link-type="value"]::before,
	[data-link-type="function"]::before,
	[data-link-type="at-rule"]::before,
	[data-link-type="selector"]::before,
	[data-link-type="maybe"]::before {
		content: "‘";
	}
	[data-link-type="property"]::after,
	[data-link-type="propdesc"]::after,
	[data-link-type="descriptor"]::after,
	[data-link-type="value"]::after,
	[data-link-type="function"]::after,
	[data-link-type="at-rule"]::after,
	[data-link-type="selector"]::after,
	[data-link-type="maybe"]::after {
		content: "’";
	}

	[data-link-type].production::before,
	[data-link-type].production::after,
	.prod [data-link-type]::before,
	.prod [data-link-type]::after {
		content: "";
	}

	[data-link-type=element],
	[data-link-type=element-attr] {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
		font-size: .9em;
	}
	[data-link-type=element]::before { content: "<" }
	[data-link-type=element]::after  { content: ">" }

	[data-link-type=biblio] {
		white-space: pre;
	}

/** Self-Links ****************************************************************/
/* Auto-generated links from an element to its own anchor, for usability */

	.heading, .issue, .note, .example, li, dt {
		position: relative;
	}
	a.self-link {
		position: absolute;
		top: 0;
		left: calc(-1 * (3.5rem - 26px));
		width: calc(3.5rem - 26px);
		height: 2em;
		text-align: center;
		border: none;
		transition: opacity .2s;
		opacity: .5;
	}
	a.self-link:hover {
		opacity: 1;
	}
	.heading > a.self-link {
		font-size: 83%;
	}
	li > a.self-link {
		left: calc(-1 * (3.5rem - 26px) - 2em);
	}
	dfn > a.self-link {
		top: auto;
		left: auto;
		opacity: 0;
		width: 1.5em;
		height: 1.5em;
		background: gray;
		color: white;
		font-style: normal;
		transition: opacity .2s, background-color .2s, color .2s;
	}
	dfn:hover > a.self-link {
		opacity: 1;
	}
	dfn > a.self-link:hover {
		color: black;
	}

	a.self-link::before            { content: "¶"; }
	.heading > a.self-link::before { content: "§"; }
	dfn > a.self-link::before      { content: "#"; }

/** Counters ******************************************************************/
/* Adds the auto-genned issue/example counters,
   until Bikeshed fills in manual ones. */
	.issue:not(.no-marker)::before {
		content: "Issue " counter(issue);
	}

	.example:not(.no-marker)::before {
		content: "Example";
		content: "Example " counter(example);
	}
	.invalid.example:not(.no-marker)::before,
	.illegal.example:not(.no-marker)::before {
		content: "Invalid Example";
		content: "Invalid Example" counter(example);
	}



/********************************************
 Remember to fix the logo section when copypasting freshly.
 */
</style>
  <meta content="Bikeshed 1.0.0" name="generator">
<style>
        .dfn-panel {
            display: inline-block;
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel > span { display: list-item; list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: .5em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">The Permissions API</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2016-04-11">11 April 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bpermissions%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[permissions] <i data-lt="">… message topic …</i></kbd>”</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/permissions/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Mounir Lamouri</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Marcos Cáceres</span> (<a class="p-org org" href="https://mozilla.com/">Mozilla</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Jeffrey Yasskin</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn"></span>
     <dt>Participate:
     <dd><span><a href="https://github.com/w3c/permissions">We are on Github.</a></span>
     <dd><span><a href="https://github.com/w3c/permissions/issues">File a bug.</a></span>
     <dd><span><a href="https://github.com/w3c/permissions/commits/gh-pages">Commit history.</a></span>
     <dt>Implementation status:
     <dd><span><a href="https://code.google.com/p/chromium/issues/detail?id=437770">Blink/Chromium</a></span>
     <dd><span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1105827">Gecko</a></span>
     <dd><span></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>The <cite>Permissions API</cite> allows a web application to be aware of the status of a given permission, to know whether it is granted, denied or if the user will be asked whether the permission should be granted.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="http://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bpermissions%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “permissions” in the subject,
	preferably like this:
	“[permissions] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="http://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/49309/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="http://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#scope-of-this-document"><span class="secno">1</span> <span class="content"> Scope of this document </span></a>
    <li><a href="#privacy-considerations"><span class="secno">2</span> <span class="content"> Privacy considerations </span></a>
    <li><a href="#permission-descriptor"><span class="secno">3</span> <span class="content"> Permission descriptor </span></a>
    <li>
     <a href="#permission-registry"><span class="secno">4</span> <span class="content"> Permission Registry </span></a>
     <ol class="toc">
      <li><a href="#geolocation"><span class="secno">4.1</span> <span class="content"> Geolocation </span></a>
      <li><a href="#notifications"><span class="secno">4.2</span> <span class="content"> Notifications </span></a>
      <li><a href="#push"><span class="secno">4.3</span> <span class="content"> Push </span></a>
      <li><a href="#midi"><span class="secno">4.4</span> <span class="content"> Midi </span></a>
      <li><a href="#media-devices"><span class="secno">4.5</span> <span class="content"> Media Devices </span></a>
      <li><a href="#background-sync"><span class="secno">4.6</span> <span class="content"> Background Sync </span></a>
     </ol>
    <li><a href="#permission-store"><span class="secno">5</span> <span class="content"> Permission Store </span></a>
    <li><a href="#status-of-a-permission"><span class="secno">6</span> <span class="content"> Status of a permission </span></a>
    <li><a href="#navigator-and-workernavigator-extension"><span class="secno">7</span> <span class="content"> Navigator and WorkerNavigator extension </span></a>
    <li><a href="#permissions-interface"><span class="secno">8</span> <span class="content"> Permissions interface </span></a>
    <li><a href="#common-permission-algorithms"><span class="secno">9</span> <span class="content"> Common permission algorithms </span></a>
    <li><a href="#examples"><span class="secno">10</span> <span class="content"> Examples </span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content"> Acknowledgments </span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <section class="non-normative">
    <h2 class="heading settled" data-level="1" id="scope-of-this-document"><span class="secno">1. </span><span class="content"> Scope of this document </span><a class="self-link" href="#scope-of-this-document"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> This document’s goal is to specify an API that will help developers to
    handle permissions on the Web platform. Web APIs have different ways to
    deal with permissions. The <a data-link-type="biblio" href="#biblio-notifications">[notifications]</a> API allows developers to
    request a permission and check the permission status explicitly. Others
    might only expose the status to web pages when they try to use the API,
    like the <a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a> which fails if the permission was not
    granted without allowing the developer to check beforehand. </p>
    <p> Being able to know whether an API call is going to prompt is useful in
    order to provide a good user experience. Unfortunately, more often than
    not, those prompts can’t be controlled by developers. </p>
    <p> The API specified in this document is meant to provide the tools so
    that web applications can improve their user experience when
    permissions are involved. </p>
    <p> The solution described in this document is meant to be extensible but
    isn’t meant to be applicable to all the current and future permissions
    available in the web platform. If you are working on a specification
    that has a permission model that wouldn’t fit in the model described in
    this document, please contact the editors or file an issue. We would
    love to hear about it. </p>
    <p> The initial intent of this document was to allow web applications to
    request and revoke permissions explicitly in addition to querying the
    permission status. This is an aspect of the specification that was
    controversial thus removed from the current document in a spirit of
    incremental changes: settling on a small API that can be improved. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="2" id="privacy-considerations"><span class="secno">2. </span><span class="content"> Privacy considerations </span><a class="self-link" href="#privacy-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> Permission states can be used as an element of fingerprinting by
    websites. Usually websites could already have access to the information
    but often through actually using the API which could lead to a
    permission request UI if the permission was not already granted. Thus,
    even though this API doesn’t expose new fingerprinting data to
    websites, it makes it easier for them to have discreet access to it.
    Therefore, implementations are encouraged to have an option for users
    to block (globally or selectively) the querying of permission states. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="permission-descriptor"><span class="secno">3. </span><span class="content"> Permission descriptor </span><a class="self-link" href="#permission-descriptor"></a></h2>
<pre class="idl def" title="">dictionary <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" data-lt="PermissionDescriptor" id="dictdef-permissiondescriptor">PermissionDescriptor<span class="dfn-panel" data-deco=""><b><a href="#dictdef-permissiondescriptor">#dictdef-permissiondescriptor</a></b><b>Referenced in:</b><span><a href="#ref-for-dictdef-permissiondescriptor-1">3. 
    Permission descriptor
  </a></span><span><a href="#ref-for-dictdef-permissiondescriptor-2">4. 
    Permission Registry
  </a> <a href="#ref-for-dictdef-permissiondescriptor-3">(2)</a></span><span><a href="#ref-for-dictdef-permissiondescriptor-4">4.3. 
      Push
    </a></span><span><a href="#ref-for-dictdef-permissiondescriptor-5">4.4. 
      Midi
    </a></span><span><a href="#ref-for-dictdef-permissiondescriptor-6">4.5. 
      Media Devices
    </a></span><span><a href="#ref-for-dictdef-permissiondescriptor-7">6. 
    Status of a permission
  </a> <a href="#ref-for-dictdef-permissiondescriptor-8">(2)</a></span><span><a href="#ref-for-dictdef-permissiondescriptor-9">8. 
    Permissions interface
  </a> <a href="#ref-for-dictdef-permissiondescriptor-10">(2)</a> <a href="#ref-for-dictdef-permissiondescriptor-11">(3)</a></span><span><a href="#ref-for-dictdef-permissiondescriptor-12">9. 
    Common permission algorithms
  </a> <a href="#ref-for-dictdef-permissiondescriptor-13">(2)</a></span></span></dfn> {
  required <a data-link-type="idl-name" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-1">PermissionName</a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionDescriptor" data-dfn-type="dict-member" data-export="" data-lt="name" data-type="PermissionName " id="dom-permissiondescriptor-name">name<span class="dfn-panel" data-deco=""><b><a href="#dom-permissiondescriptor-name">#dom-permissiondescriptor-name</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissiondescriptor-name-1">6. 
    Status of a permission
  </a> <a href="#ref-for-dom-permissiondescriptor-name-2">(2)</a></span></span></dfn>;
};
</pre>
    <p> A permission is defined by a name and other properties that depend on
    the name. The simplest permissions require only a name, but some others
    will require more information, in which case, they should have an <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-1">associated PermissionDescriptor</a> dictionary that inherits from <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-1">PermissionDescriptor</a></code>. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="permission-registry"><span class="secno">4. </span><span class="content"> Permission Registry </span><a class="self-link" href="#permission-registry"></a></h2>
<pre class="idl def" title="">enum <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export="" data-lt="PermissionName" id="enumdef-permissionname">PermissionName<span class="dfn-panel" data-deco=""><b><a href="#enumdef-permissionname">#enumdef-permissionname</a></b><b>Referenced in:</b><span><a href="#ref-for-enumdef-permissionname-1">3. 
    Permission descriptor
  </a></span><span><a href="#ref-for-enumdef-permissionname-2">4. 
    Permission Registry
  </a></span><span><a href="#ref-for-enumdef-permissionname-3">5. 
    Permission Store
  </a></span><span><a href="#ref-for-enumdef-permissionname-4">6. 
    Status of a permission
  </a></span></span></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-1">"geolocation"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-1">"notifications"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push" id="ref-for-dom-permissionname-push-1">"push"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-1">"midi"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-1">"camera"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone-1">"microphone"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker" id="ref-for-dom-permissionname-speaker-1">"speaker"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info-1">"device-info"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync" id="ref-for-dom-permissionname-background-sync-1">"background-sync"</a>,
};
</pre>
    <p> Each enumeration value in the <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-2">PermissionName</a></code> enum identifies a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission" id="permission">permission<span class="dfn-panel" data-deco=""><b><a href="#permission">#permission</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-1">4. 
    Permission Registry </a> <a href="#ref-for-permission-2">(2)</a></span><span><a href="#ref-for-permission-3">6. 
    Status of a permission </a> <a href="#ref-for-permission-4">(2)</a> <a href="#ref-for-permission-5">(3)</a></span><span><a href="#ref-for-permission-6">8. 
    Permissions interface </a></span></span></dfn>, which consists of the following
    algorithms and types: </p>
    <dl>
     <dt> An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="associated PermissionDescriptor" id="associated-permissiondescriptor">associated PermissionDescriptor<span class="dfn-panel" data-deco=""><b><a href="#associated-permissiondescriptor">#associated-permissiondescriptor</a></b><b>Referenced in:</b><span><a href="#ref-for-associated-permissiondescriptor-1">3. 
    Permission descriptor </a></span><span><a href="#ref-for-associated-permissiondescriptor-2">4. 
    Permission Registry </a> <a href="#ref-for-associated-permissiondescriptor-3">(2)</a></span><span><a href="#ref-for-associated-permissiondescriptor-4">4.3. 
      Push </a></span><span><a href="#ref-for-associated-permissiondescriptor-5">4.4. 
      Midi </a></span><span><a href="#ref-for-associated-permissiondescriptor-6">4.5. 
      Media Devices </a></span><span><a href="#ref-for-associated-permissiondescriptor-7">8. 
    Permissions interface </a> <a href="#ref-for-associated-permissiondescriptor-8">(2)</a> <a href="#ref-for-associated-permissiondescriptor-9">(3)</a> <a href="#ref-for-associated-permissiondescriptor-10">(4)</a> <a href="#ref-for-associated-permissiondescriptor-11">(5)</a> <a href="#ref-for-associated-permissiondescriptor-12">(6)</a></span></span></dfn> 
     <dd> <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-2">PermissionDescriptor</a></code> or one of its subtypes.
      If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-3">PermissionDescriptor</a></code>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission storage type" id="permission-storage-type">permission storage type<span class="dfn-panel" data-deco=""><b><a href="#permission-storage-type">#permission-storage-type</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-storage-type-1">4. 
    Permission Registry </a> <a href="#ref-for-permission-storage-type-2">(2)</a> <a href="#ref-for-permission-storage-type-3">(3)</a></span><span><a href="#ref-for-permission-storage-type-4">4.5. 
      Media Devices </a></span></span></dfn> 
     <dd> <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-1">PermissionStorage</a></code> or one of its subtypes.
      If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-2">PermissionStorage</a></code>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission result type" id="permission-result-type">permission result type<span class="dfn-panel" data-deco=""><b><a href="#permission-result-type">#permission-result-type</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-result-type-1">4. 
    Permission Registry </a> <a href="#ref-for-permission-result-type-2">(2)</a> <a href="#ref-for-permission-result-type-3">(3)</a> <a href="#ref-for-permission-result-type-4">(4)</a></span><span><a href="#ref-for-permission-result-type-5">4.5. 
      Media Devices </a></span><span><a href="#ref-for-permission-result-type-6">6. 
    Status of a permission </a></span></span></dfn> 
     <dd> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-1">PermissionStatus</a></code> or one of its subtypes.
      If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-2">PermissionStatus</a></code>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission query algorithm" id="permission-query-algorithm">permission query algorithm<span class="dfn-panel" data-deco=""><b><a href="#permission-query-algorithm">#permission-query-algorithm</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-query-algorithm-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-permission-query-algorithm-2">6. 
    Status of a permission </a></span></span></dfn> 
     <dd> Takes an instance of the <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-2">associated PermissionDescriptor</a> type,
      an instance of the <a data-link-type="dfn" href="#permission-storage-type" id="ref-for-permission-storage-type-1">permission storage type</a> that’s currently
      stored for this <a data-link-type="dfn" href="#permission" id="ref-for-permission-1">permission</a>, and a new or existing instance of
      the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-1">permission result type</a>, and updates the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-2">permission
      result type</a> instance with the query result. Used by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-1">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-query" id="ref-for-dom-permissions-query-1">query()</a></code> method and the <a href="#PermissionStatus-update">PermissionStatus
      update steps</a>. If unspecified, this defaults to the <a data-link-type="dfn" href="#boolean-permission-query-algorithm" id="ref-for-boolean-permission-query-algorithm-1">boolean
      permission query algorithm</a>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission request algorithm" id="permission-request-algorithm">permission request algorithm<span class="dfn-panel" data-deco=""><b><a href="#permission-request-algorithm">#permission-request-algorithm</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-request-algorithm-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-permission-request-algorithm-2">8. 
    Permissions interface </a></span></span></dfn> 
     <dd> Takes the previously-stored instance of the <a data-link-type="dfn" href="#permission-storage-type" id="ref-for-permission-storage-type-2">permission storage
      type</a>, an instance of the <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-3">associated PermissionDescriptor</a>,
      and a newly-created instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-3">permission result type</a>.
      Shows the user any necessary prompt to try to increase permissions,
      and updates the instances of the <a data-link-type="dfn" href="#permission-storage-type" id="ref-for-permission-storage-type-3">permission storage type</a> and <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-4">permission result type</a> to match. May return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> if the request can fail exceptionally. (Merely being denied
      permission is not exceptional.) Used by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-2">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-request" id="ref-for-dom-permissions-request-1">request()</a></code> method, which handles
      reading and writing the <a data-link-type="dfn" href="#permission-store" id="ref-for-permission-store-1">permission store</a>. If unspecified, this
      defaults to the <a data-link-type="dfn" href="#boolean-permission-request-algorithm" id="ref-for-boolean-permission-request-algorithm-1">boolean permission request algorithm</a>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="permission revocation algorithm" id="permission-revocation-algorithm">permission revocation algorithm<span class="dfn-panel" data-deco=""><b><a href="#permission-revocation-algorithm">#permission-revocation-algorithm</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-revocation-algorithm-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-permission-revocation-algorithm-2">8. 
    Permissions interface </a></span></span></dfn> 
     <dd> Takes no arguments. Updates any other parts of the implementation
      that need to be kept in sync after an entry is removed from the
      permission store. Triggered by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-3">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-revoke" id="ref-for-dom-permissions-revoke-1">revoke()</a></code> method. If unspecified, this
      defaults to doing nothing. 
    </dl>
    <p> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="boolean permission" data-noexport="" id="boolean-permission">boolean permission<span class="dfn-panel" data-deco=""><b><a href="#boolean-permission">#boolean-permission</a></b><b>Referenced in:</b><span><a href="#ref-for-boolean-permission-1">4.1. 
      Geolocation </a></span><span><a href="#ref-for-boolean-permission-2">4.2. 
      Notifications </a></span></span></dfn> is a <a data-link-type="dfn" href="#permission" id="ref-for-permission-2">permission</a> with all types
    and algorithms defaulted. </p>
    <section>
     <h3 class="heading settled" data-level="4.1" id="geolocation"><span class="secno">4.1. </span><span class="content"> Geolocation </span><a class="self-link" href="#geolocation"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;geolocation&quot;" id="dom-permissionname-geolocation">"geolocation"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-geolocation">#dom-permissionname-geolocation</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-geolocation-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissionname-geolocation-2">10. 
    Examples </a></span></span></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a>. It is a <a data-link-type="dfn" href="#boolean-permission" id="ref-for-boolean-permission-1">boolean permission</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.2" id="notifications"><span class="secno">4.2. </span><span class="content"> Notifications </span><a class="self-link" href="#notifications"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;notifications&quot;" id="dom-permissionname-notifications">"notifications"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-notifications">#dom-permissionname-notifications</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-notifications-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissionname-notifications-2">10. 
    Examples </a> <a href="#ref-for-dom-permissionname-notifications-3">(2)</a></span></span></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-notifications">[notifications]</a> API. It is a <a data-link-type="dfn" href="#boolean-permission" id="ref-for-boolean-permission-2">boolean permission</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.3" id="push"><span class="secno">4.3. </span><span class="content"> Push </span><a class="self-link" href="#push"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;push&quot;" id="dom-permissionname-push">"push"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-push">#dom-permissionname-push</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-push-1">4. 
    Permission Registry </a></span></span></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-push-api">[push-api]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-4">associated PermissionDescriptor</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-pushpermissiondescriptor">PushPermissionDescriptor<a class="self-link" href="#dictdef-pushpermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-4">PermissionDescriptor</a> {
  boolean <dfn class="idl-code" data-default="false" data-dfn-for="PushPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly<a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly"></a></dfn> = false;
};
</pre>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.4" id="midi"><span class="secno">4.4. </span><span class="content"> Midi </span><a class="self-link" href="#midi"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;midi&quot;" id="dom-permissionname-midi">"midi"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-midi">#dom-permissionname-midi</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-midi-1">4. 
    Permission Registry </a></span></span></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-webmidi">[webmidi]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-5">associated PermissionDescriptor</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-midipermissiondescriptor">MidiPermissionDescriptor<a class="self-link" href="#dictdef-midipermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-5">PermissionDescriptor</a> {
  boolean <dfn class="idl-code" data-default="false" data-dfn-for="MidiPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-midipermissiondescriptor-sysex">sysex<a class="self-link" href="#dom-midipermissiondescriptor-sysex"></a></dfn> = false;
};
</pre>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.5" id="media-devices"><span class="secno">4.5. </span><span class="content"> Media Devices </span><a class="self-link" href="#media-devices"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;camera&quot;" id="dom-permissionname-camera">"camera"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-camera">#dom-permissionname-camera</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-camera-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissionname-camera-2">4.5. 
      Media Devices </a></span><span><a href="#ref-for-dom-permissionname-camera-3">10. 
    Examples </a></span></span></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;microphone&quot;" id="dom-permissionname-microphone">"microphone"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-microphone">#dom-permissionname-microphone</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-microphone-1">4. 
    Permission Registry </a></span></span></dfn> , and <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;speaker&quot;" id="dom-permissionname-speaker">"speaker"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-speaker">#dom-permissionname-speaker</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-speaker-1">4. 
    Permission Registry </a></span></span></dfn> permissions are associated with permission to use media devices as
      specified in <a data-link-type="biblio" href="#biblio-getusermedia">[GETUSERMEDIA]</a> and <a data-link-type="biblio" href="#biblio-audio-output">[audio-output]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-6">associated PermissionDescriptor</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-devicepermissiondescriptor">DevicePermissionDescriptor<a class="self-link" href="#dictdef-devicepermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-6">PermissionDescriptor</a> {
  DOMString <dfn class="dfn-paneled idl-code" data-dfn-for="DevicePermissionDescriptor" data-dfn-type="dict-member" data-export="" data-lt="deviceId" data-type="DOMString " id="dom-devicepermissiondescriptor-deviceid">deviceId<span class="dfn-panel" data-deco=""><b><a href="#dom-devicepermissiondescriptor-deviceid">#dom-devicepermissiondescriptor-deviceid</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-devicepermissiondescriptor-deviceid-1">4.5. 
      Media Devices
    </a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-2">(2)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-3">(3)</a></span></span></dfn>;
};
</pre>
       <p> A permission covers access to the device given in the associated
          descriptor. </p>
       <p> If the descriptor does not have a <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-1">deviceId</a></code>, its semantic is that
          it queries for access to all devices of that class. Thus, if a
          query for the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-2">"camera"</a></code> permission with no <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-2">deviceId</a></code> returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-1">"granted"</a></code>, the client knows that there will never be a permission
          prompt for a camera, and if <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-1">"denied"</a></code> is returned, it knows that
          no getUserMedia request for a camera will succeed. </p>
       <p> If a permission state is present for access to some, but not all,
          cameras, a query without the <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-3">deviceId</a></code> will return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-1">"prompt"</a></code>. </p>
      <dt> <a data-link-type="dfn" href="#permission-storage-type" id="ref-for-permission-storage-type-4">permission storage type</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-5">permission result type</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm-1">permission query algorithm</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-request-algorithm" id="ref-for-permission-request-algorithm-1">permission request algorithm</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm-1">permission revocation algorithm</a> 
      <dd> TODO: Stop playing/recording data? 
     </dl>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;device-info&quot;" id="dom-permissionname-device-info">"device-info"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-device-info">#dom-permissionname-device-info</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-device-info-1">4. 
    Permission Registry </a></span></span></dfn> permission controls access to names and capabilities of input and
      output devices. </p>
     <p> A successful call to the <code>getUserMedia</code> function of <a data-link-type="biblio" href="#biblio-getusermedia">[GETUSERMEDIA]</a> MUST cause permission to be granted for the returned
      devices, and MAY cause other permissions to be granted. </p>
     <p> Stopping a MediaStreamTrack MAY cause permission to be revoked for
      the associated device. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.6" id="background-sync"><span class="secno">4.6. </span><span class="content"> Background Sync </span><a class="self-link" href="#background-sync"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" data-lt="&quot;background-sync&quot;" id="dom-permissionname-background-sync">"background-sync"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionname-background-sync">#dom-permissionname-background-sync</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionname-background-sync-1">4. 
    Permission Registry </a></span></span></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-web-background-sync">[web-background-sync]</a>. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="5" data-lt="Permission Store" data-noexport="" id="permission-store"><span class="secno">5. </span><span class="content"> Permission Store </span><span class="dfn-panel" data-deco=""><b><a href="#permission-store">#permission-store</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-store-1">4. 
    Permission Registry </a></span></span></h2>
    <p> <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">User agents</a> MAY use a form of storage to
    keep track of web site permissions. When they do, they MUST have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="permission storage identifier" data-noexport="" id="permission-storage-identifier">permission storage identifier<span class="dfn-panel" data-deco=""><b><a href="#permission-storage-identifier">#permission-storage-identifier</a></b><b>Referenced in:</b><span><a href="#ref-for-permission-storage-identifier-1">5. 
    Permission Store </a> <a href="#ref-for-permission-storage-identifier-2">(2)</a> <a href="#ref-for-permission-storage-identifier-3">(3)</a> <a href="#ref-for-permission-storage-identifier-4">(4)</a> <a href="#ref-for-permission-storage-identifier-5">(5)</a> <a href="#ref-for-permission-storage-identifier-6">(6)</a></span></span></dfn> which is linked to a <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-3">PermissionStorage</a></code> instance or one of its subtypes. </p>
    <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="get a permission storage identifier" data-noexport="" id="get-a-permission-storage-identifier">get a permission storage identifier<span class="dfn-panel" data-deco=""><b><a href="#get-a-permission-storage-identifier">#get-a-permission-storage-identifier</a></b><b>Referenced in:</b><span><a href="#ref-for-get-a-permission-storage-identifier-1">6. 
    Status of a permission </a></span><span><a href="#ref-for-get-a-permission-storage-identifier-2">8. 
    Permissions interface </a> <a href="#ref-for-get-a-permission-storage-identifier-3">(2)</a></span></span></dfn> for a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-3">PermissionName</a></code> <var>name</var> and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings
    object</a> <var>settings</var>, the UA MUST return a tuple consisting
    of: </p>
    <ol>
     <li> <var>name</var> 
     <li> <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a> 
     <li>optional UA-specific data like whether <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a> has a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#parent-browsing-context">parent browsing context</a>, or <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a> 
    </ol>
<pre class="idl def">dictionary <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" data-lt="PermissionStorage" id="dictdef-permissionstorage">PermissionStorage<span class="dfn-panel" data-deco=""><b><a href="#dictdef-permissionstorage">#dictdef-permissionstorage</a></b><b>Referenced in:</b><span><a href="#ref-for-dictdef-permissionstorage-1">4. 
    Permission Registry
  </a> <a href="#ref-for-dictdef-permissionstorage-2">(2)</a></span><span><a href="#ref-for-dictdef-permissionstorage-3">5. 
    Permission Store
  </a> <a href="#ref-for-dictdef-permissionstorage-4">(2)</a> <a href="#ref-for-dictdef-permissionstorage-5">(3)</a> <a href="#ref-for-dictdef-permissionstorage-6">(4)</a> <a href="#ref-for-dictdef-permissionstorage-7">(5)</a> <a href="#ref-for-dictdef-permissionstorage-8">(6)</a> <a href="#ref-for-dictdef-permissionstorage-9">(7)</a></span><span><a href="#ref-for-dictdef-permissionstorage-10">9. 
    Common permission algorithms
  </a></span></span></dfn> {
  // PermissionStorage is just an explanatory device.
  // Instances are never received from or passed to Javascript code.

  required <a data-link-type="idl-name" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate-1">PermissionState</a> <dfn class="idl-code" data-dfn-for="PermissionStorage" data-dfn-type="dict-member" data-export="" data-type="PermissionState " id="dom-permissionstorage-state">state<a class="self-link" href="#dom-permissionstorage-state"></a></dfn>;
};
</pre>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="retrieve a permission storage entry" data-noexport="" id="retrieve-a-permission-storage-entry">retrieve a permission storage entry<span class="dfn-panel" data-deco=""><b><a href="#retrieve-a-permission-storage-entry">#retrieve-a-permission-storage-entry</a></b><b>Referenced in:</b><span><a href="#ref-for-retrieve-a-permission-storage-entry-1">6. 
    Status of a permission </a></span></span></dfn> of a <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-1">permission storage identifier</a> are as follows: </p>
    <ol>
     <li>If the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> has a <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-4">PermissionStorage</a></code> associated
    with the <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-2">permission storage identifier</a> in its permission store,
    it MUST return the <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-5">PermissionStorage</a></code>. 
     <li>Otherwise, it MUST return <code>undefined</code>. 
    </ol>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="create a permission storage entry" data-noexport="" id="create-a-permission-storage-entry">create a permission storage entry<span class="dfn-panel" data-deco=""><b><a href="#create-a-permission-storage-entry">#create-a-permission-storage-entry</a></b><b>Referenced in:</b><span><a href="#ref-for-create-a-permission-storage-entry-1">8. 
    Permissions interface </a></span></span></dfn> for a <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-3">permission storage identifier</a> are as follows: </p>
    <ol>
     <li>If the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> has a <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-6">PermissionStorage</a></code> associated
    with the <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-4">permission storage identifier</a> in its permission store,
    it MUST overwrite it to the given <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-7">PermissionStorage</a></code>. 
     <li>Otherwise, it MUST write the new <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-8">PermissionStorage</a></code> to its
    permission store. 
    </ol>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="delete a permission storage entry" data-noexport="" id="delete-a-permission-storage-entry">delete a permission storage entry<span class="dfn-panel" data-deco=""><b><a href="#delete-a-permission-storage-entry">#delete-a-permission-storage-entry</a></b><b>Referenced in:</b><span><a href="#ref-for-delete-a-permission-storage-entry-1">8. 
    Permissions interface </a></span></span></dfn> of a <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-5">permission storage identifier</a> are as follows: </p>
    <ol>
     <li>If the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> has a <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-9">PermissionStorage</a></code> associated
    with the <a data-link-type="dfn" href="#permission-storage-identifier" id="ref-for-permission-storage-identifier-6">permission storage identifier</a> in its permission store,
    it MUST remove it. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="status-of-a-permission"><span class="secno">6. </span><span class="content"> Status of a permission </span><a class="self-link" href="#status-of-a-permission"></a></h2>
<pre class="idl def">enum <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export="" data-lt="PermissionState" id="enumdef-permissionstate">PermissionState<span class="dfn-panel" data-deco=""><b><a href="#enumdef-permissionstate">#enumdef-permissionstate</a></b><b>Referenced in:</b><span><a href="#ref-for-enumdef-permissionstate-1">5. 
    Permission Store
  </a></span><span><a href="#ref-for-enumdef-permissionstate-2">6. 
    Status of a permission
  </a></span></span></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-2">"granted"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-2">"denied"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-2">"prompt"</a>,
};
</pre>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" data-lt="&quot;granted&quot;" id="dom-permissionstate-granted">"granted"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstate-granted">#dom-permissionstate-granted</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstate-granted-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-dom-permissionstate-granted-2">6. 
    Status of a permission </a></span></span></dfn> state represents
    that the caller will be able
    to successfuly access the feature without having the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> asking the user’s permission. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" data-lt="&quot;denied&quot;" id="dom-permissionstate-denied">"denied"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstate-denied">#dom-permissionstate-denied</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstate-denied-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-dom-permissionstate-denied-2">6. 
    Status of a permission </a></span></span></dfn> state represents
    that the caller will not be
    able to access the feature. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" data-lt="&quot;prompt&quot;" id="dom-permissionstate-prompt">"prompt"<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstate-prompt">#dom-permissionstate-prompt</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstate-prompt-1">4.5. 
      Media Devices </a></span><span><a href="#ref-for-dom-permissionstate-prompt-2">6. 
    Status of a permission </a> <a href="#ref-for-dom-permissionstate-prompt-3">(2)</a></span></span></dfn> state represents
    that the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> will be asking the user’s permission if the caller tries to access the
    feature. The user might grant, deny or dismiss the request. </p>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="retrieve the permission storage" data-noexport="" id="retrieve-the-permission-storage">retrieve the permission storage<span class="dfn-panel" data-deco=""><b><a href="#retrieve-the-permission-storage">#retrieve-the-permission-storage</a></b><b>Referenced in:</b><span><a href="#ref-for-retrieve-the-permission-storage-1">6. 
    Status of a permission </a></span><span><a href="#ref-for-retrieve-the-permission-storage-2">8. 
    Permissions interface </a></span></span></dfn> for a given <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-4">PermissionName</a></code> <var>name</var> are as follows: </p>
    <ol>
     <li> <a data-link-type="dfn" href="#get-a-permission-storage-identifier" id="ref-for-get-a-permission-storage-identifier-1">Get a permission storage identifier</a> for <var>name</var> and
      the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>, and let <var>identifier</var> be the result. 
     <li>Run the steps to <a data-link-type="dfn" href="#retrieve-a-permission-storage-entry" id="ref-for-retrieve-a-permission-storage-entry-1">retrieve a permission storage entry</a> of <var>identifier</var>. 
     <li>If the result of those steps are not <code>undefined</code>, return
    it and abort these steps. 
     <li>Otherwise, the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST return a default value based
    on <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a>’s defined heuristics. For example, <code>{state: <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-3">"prompt"</a></code>}</code> can be a default value, but it can also be based on
    frequency of visits. 
    </ol>
<pre class="idl def">[Exposed=(Window,Worker)]
interface <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-lt="PermissionStatus" id="permissionstatus">PermissionStatus<span class="dfn-panel" data-deco=""><b><a href="#permissionstatus">#permissionstatus</a></b><b>Referenced in:</b><span><a href="#ref-for-permissionstatus-1">4. 
    Permission Registry
  </a> <a href="#ref-for-permissionstatus-2">(2)</a></span><span><a href="#ref-for-permissionstatus-3">6. 
    Status of a permission
  </a> <a href="#ref-for-permissionstatus-4">(2)</a> <a href="#ref-for-permissionstatus-5">(3)</a></span><span><a href="#ref-for-permissionstatus-6">8. 
    Permissions interface
  </a> <a href="#ref-for-permissionstatus-7">(2)</a> <a href="#ref-for-permissionstatus-8">(3)</a></span><span><a href="#ref-for-permissionstatus-9">9. 
    Common permission algorithms
  </a> <a href="#ref-for-permissionstatus-10">(2)</a></span></span></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  readonly attribute <a data-link-type="idl-name" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate-2">PermissionState</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="PermissionState " href="#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state-1">state</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler " href="#dom-permissionstatus-onchange" id="ref-for-dom-permissionstatus-onchange-1">onchange</a>;
};
</pre>
    <p> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-3">PermissionStatus</a></code> instances are created with the following
    internal slots: </p>
    <dl>
     <dt> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" data-lt="[[permission]]" id="dom-permissionstatus-permission-slot">[[permission]]<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstatus-permission-slot">#dom-permissionstatus-permission-slot</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstatus-permission-slot-1">6. 
    Status of a permission </a> <a href="#ref-for-dom-permissionstatus-permission-slot-2">(2)</a> <a href="#ref-for-dom-permissionstatus-permission-slot-3">(3)</a></span></span></dfn> 
     <dd> A <a data-link-type="dfn" href="#permission" id="ref-for-permission-3">permission</a>. <code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-permission-slot" id="ref-for-dom-permissionstatus-permission-slot-1">[[permission]]</a></code> is always the <a data-link-type="dfn" href="#permission" id="ref-for-permission-4">permission</a> named <code><code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-1">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-1">name</a></code></code>. 
     <dt> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" data-lt="[[query]]" id="dom-permissionstatus-query-slot">[[query]]<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstatus-query-slot">#dom-permissionstatus-query-slot</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstatus-query-slot-1">6. 
    Status of a permission </a> <a href="#ref-for-dom-permissionstatus-query-slot-2">(2)</a> <a href="#ref-for-dom-permissionstatus-query-slot-3">(3)</a> <a href="#ref-for-dom-permissionstatus-query-slot-4">(4)</a></span></span></dfn> 
     <dd> A <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-7">PermissionDescriptor</a></code>. 
    </dl>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="update the state" data-noexport="" id="update-the-state">update the state<span class="dfn-panel" data-deco=""><b><a href="#update-the-state">#update-the-state</a></b><b>Referenced in:</b><span><a href="#ref-for-update-the-state-1">6. 
    Status of a permission </a></span><span><a href="#ref-for-update-the-state-2">8. 
    Permissions interface </a> <a href="#ref-for-update-the-state-3">(2)</a></span></span></dfn> of a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-4">PermissionStatus</a></code> instance <var>status</var> are as
    follows: </p>
    <ol>
     <li>Run the steps to <a data-link-type="dfn" href="#retrieve-the-permission-storage" id="ref-for-retrieve-the-permission-storage-1">retrieve the permission storage</a> for <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-2">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-2">name</a></code></code>,
      and let <var>storage</var> be the result. 
     <li>Run <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-permission-slot" id="ref-for-dom-permissionstatus-permission-slot-2">[[permission]]</a></code></code>’s <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm-2">permission
    query algorithm</a>, passing <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-3">[[query]]</a></code></code>, <var>storage</var>, and <var>status</var>. 
    </ol>
    <p> The steps to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="create a PermissionStatus" data-noexport="" id="create-a-permissionstatus">create a PermissionStatus<span class="dfn-panel" data-deco=""><b><a href="#create-a-permissionstatus">#create-a-permissionstatus</a></b><b>Referenced in:</b><span><a href="#ref-for-create-a-permissionstatus-1">8. 
    Permissions interface </a> <a href="#ref-for-create-a-permissionstatus-2">(2)</a> <a href="#ref-for-create-a-permissionstatus-3">(3)</a></span></span></dfn> for a given <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-8">PermissionDescriptor</a></code> <var>permissionDesc</var> are as follow: </p>
    <ol>
     <li>Let <var>permission</var> be the <a data-link-type="dfn" href="#permission" id="ref-for-permission-5">permission</a> named by <code> <var>permissionDesc</var>.name</code>. 
     <li>
      Let <var>status</var> be a new instance of <var>permission</var>’s <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-6">permission result type</a>, with the internal slots filled as: 
      <table class="data">
       <thead>
        <tr>
         <th> Slot 
         <th> Value 
       <tbody>
        <tr>
         <td> <code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-permission-slot" id="ref-for-dom-permissionstatus-permission-slot-3">[[permission]]</a></code> 
         <td> <var>permission</var> 
        <tr>
         <td> <code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-4">[[query]]</a></code> 
         <td> <var>permissionDesc</var> 
      </table>
     <li>Return <var>status</var>. 
    </ol>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" data-lt="state" id="dom-permissionstatus-state">state<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstatus-state">#dom-permissionstatus-state</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstatus-state-1">6. 
    Status of a permission </a></span></span></dfn> attribute MUST return the latest value that was set on the current
    instance. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" data-lt="onchange" id="dom-permissionstatus-onchange">onchange<span class="dfn-panel" data-deco=""><b><a href="#dom-permissionstatus-onchange">#dom-permissionstatus-onchange</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissionstatus-onchange-1">6. 
    Status of a permission </a></span></span></dfn> attribute is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a> whose corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event
    type</a> is <code>change</code>. </p>
    <p id="PermissionStatus-update"> Whenever the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> is aware that the state of a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-5">PermissionStatus</a></code> instance <var>status</var> has changed,
    it MUST asynchronously run the following steps: </p>
    <ol>
     <li>Run the steps to <a data-link-type="dfn" href="#update-the-state" id="ref-for-update-the-state-1">update the state</a> of <var>status</var>. 
     <li> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <dfn data-dfn-type="dfn" data-noexport="" id="permission-task-source">permission task source<a class="self-link" href="#permission-task-source"></a></dfn> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a> named <code>change</code> at <var>status</var>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="navigator-and-workernavigator-extension"><span class="secno">7. </span><span class="content"> Navigator and WorkerNavigator extension </span><a class="self-link" href="#navigator-and-workernavigator-extension"></a></h2>
    <p> A <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-4">Permissions</a></code> instance is exposed on the <code>navigator</code> object for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsers.html#window">Window</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#worker">Worker</a></code> contexts. </p>
<pre class="idl def">[Exposed=(Window)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions-5">Permissions</a> <dfn class="idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Permissions " id="dom-navigator-permissions">permissions<a class="self-link" href="#dom-navigator-permissions"></a></dfn>;
};
</pre>
<pre class="idl def">[Exposed=(Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions-6">Permissions</a> <dfn class="idl-code" data-dfn-for="WorkerNavigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Permissions " id="dom-workernavigator-permissions">permissions<a class="self-link" href="#dom-workernavigator-permissions"></a></dfn>;
};
</pre>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="permissions-interface"><span class="secno">8. </span><span class="content"> Permissions interface </span><a class="self-link" href="#permissions-interface"></a></h2>
<pre class="idl def">[Exposed=(Window,Worker)]
interface <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-lt="Permissions" id="permissions">Permissions<span class="dfn-panel" data-deco=""><b><a href="#permissions">#permissions</a></b><b>Referenced in:</b><span><a href="#ref-for-permissions-1">4. 
    Permission Registry
  </a> <a href="#ref-for-permissions-2">(2)</a> <a href="#ref-for-permissions-3">(3)</a></span><span><a href="#ref-for-permissions-4">7. 
    Navigator and WorkerNavigator extension
  </a> <a href="#ref-for-permissions-5">(2)</a> <a href="#ref-for-permissions-6">(3)</a></span></span></dfn> {
  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-6">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query" id="ref-for-dom-permissions-query-2">query</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-9">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/query(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-query-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-query-permissiondesc-permissiondesc"></a></dfn>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-7">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-request" id="ref-for-dom-permissions-request-2">request</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-10">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/request(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-request-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-request-permissiondesc-permissiondesc"></a></dfn>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-8">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-revoke" id="ref-for-dom-permissions-revoke-2">revoke</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-11">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/revoke(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-revoke-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-revoke-permissiondesc-permissiondesc"></a></dfn>);
};
</pre>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="query(permissionDesc)" id="dom-permissions-query">query()<span class="dfn-panel" data-deco=""><b><a href="#dom-permissions-query">#dom-permissions-query</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissions-query-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissions-query-2">8. 
    Permissions interface </a></span></span></dfn> method is invoked,
    the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST run the following <dfn data-dfn-type="dfn" data-export="" id="query-a-permission">query a
    permission<a class="self-link" href="#query-a-permission"></a></dfn> algorithm, passing the parameter <var>permissionDesc</var>: </p>
    <ol>
     <li>
      If <var>permissionDesc.name</var> has an <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-7">associated
    PermissionDescriptor</a>, convert the underlying ECMAScript object to
    the <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-8">associated PermissionDescriptor</a> dictionary as <a href="http://heycam.github.io/webidl/#es-dictionary">described</a> in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, then: 
      <ul>
       <li>If that operation failed, return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> rejected with
        a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> and abort these steps. 
       <li>Otherwise, set <var>permissionDesc</var> to the result of the
        operation. 
      </ul>
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus-1">create a PermissionStatus</a> for <var>permissionDesc</var>, and let <var>status</var> be the result. 
     <li>Run the steps to <a data-link-type="dfn" href="#update-the-state" id="ref-for-update-the-state-2">update the state</a> on <var>status</var>. 
     <li>Resolve <var>promise</var> with <var>status</var>. 
    </ol>
    <div class="note" role="note"> If a developer wants to check multiple permissions at once, the editors
    recommend the use of <code><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>.all()</code>. An example can be
    found in the <a href="#examples">Examples section</a>. </div>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="request(permissionDesc)" id="dom-permissions-request">request()<span class="dfn-panel" data-deco=""><b><a href="#dom-permissions-request">#dom-permissions-request</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissions-request-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissions-request-2">8. 
    Permissions interface </a></span></span></dfn> method is invoked,
    the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST run the following <dfn data-dfn-type="dfn" data-export="" id="request-a-permission">request a
    permission<a class="self-link" href="#request-a-permission"></a></dfn> algorithm, passing the parameter <var>permissionDesc</var>: </p>
    <ol class="algorithm">
     <li>
      If <var>permissionDesc.name</var> has an <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-9">associated
    PermissionDescriptor</a>, convert the underlying ECMAScript object to
    the <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-10">associated PermissionDescriptor</a> dictionary as <a href="http://heycam.github.io/webidl/#es-dictionary">described</a> in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, then: 
      <ul>
       <li>If that operation failed, return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> rejected with
        a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> and abort these steps. 
       <li>Otherwise, set <var>permissionDesc</var> to the result of the
        operation. 
      </ul>
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li>Let <var>permission</var> be the <a data-link-type="dfn" href="#permission" id="ref-for-permission-6">permission</a> named by <code> <var>permissionDesc</var>.name</code>. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus-2">create a PermissionStatus</a> for <var>permissionDesc</var>, and let <var>status</var> be the result. 
     <li>Run the steps to <a data-link-type="dfn" href="#retrieve-the-permission-storage" id="ref-for-retrieve-the-permission-storage-2">retrieve the permission storage</a> for <var>permission</var>, and let <var>storage</var> be the result. 
     <li>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#promise-calling">promise-calling</a> <var>permission</var>’s <a data-link-type="dfn" href="#permission-request-algorithm" id="ref-for-permission-request-algorithm-2">permission request algorithm</a> with <var>storage</var>, <var>permissionDesc</var>, and <var>status</var> as arguments. 
     <li>Resolve <var>promise</var> with the result of <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#transforming-by">transforming</a> <var>result</var> with a fulfillment handler that runs the following
    steps. 
     <li> <a data-link-type="dfn" href="#get-a-permission-storage-identifier" id="ref-for-get-a-permission-storage-identifier-2">Get a permission storage identifier</a> for <code><var>permissionDesc</var>.name</code> and the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>, and <a data-link-type="dfn" href="#create-a-permission-storage-entry" id="ref-for-create-a-permission-storage-entry-1">create a permission
      storage entry</a> mapping this identifier to <var>storage</var>. 
     <li>Return <var>status</var>. 
    </ol>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="revoke(permissionDesc)" id="dom-permissions-revoke">revoke()<span class="dfn-panel" data-deco=""><b><a href="#dom-permissions-revoke">#dom-permissions-revoke</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-permissions-revoke-1">4. 
    Permission Registry </a></span><span><a href="#ref-for-dom-permissions-revoke-2">8. 
    Permissions interface </a></span></span></dfn> method is invoked, the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST run the following <dfn data-dfn-type="dfn" data-export="" id="revoke-a-permission">revoke a permission<a class="self-link" href="#revoke-a-permission"></a></dfn> algorithm, passing the
    parameter <var>permissionDesc</var>: </p>
    <ol>
     <li>
      If <var>permissionDesc.name</var> has an <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-11">associated
    PermissionDescriptor</a>, convert the underlying ECMAScript object to
    the <a data-link-type="dfn" href="#associated-permissiondescriptor" id="ref-for-associated-permissiondescriptor-12">associated PermissionDescriptor</a> dictionary as <a href="http://heycam.github.io/webidl/#es-dictionary">described</a> in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, then: 
      <ul>
       <li>If that operation failed, return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> rejected with
        a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> and abort these steps. 
       <li>Otherwise, set <var>permissionDesc</var> to the result of the
        operation. 
      </ul>
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li> <a data-link-type="dfn" href="#get-a-permission-storage-identifier" id="ref-for-get-a-permission-storage-identifier-3">Get a permission storage identifier</a> for <code><var>permission</var>.name</code> and the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>, and let <var>identifier</var> be
      the result. 
     <li>Run the steps to <a data-link-type="dfn" href="#delete-a-permission-storage-entry" id="ref-for-delete-a-permission-storage-entry-1">delete a permission storage entry</a> using <var>identifier</var>. 
     <li>Run <var>permissionDesc.name</var>’s <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm-2">permission revocation
    algorithm</a>. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus-3">create a PermissionStatus</a> for <var>permissionDesc</var>, and let <var>status</var> be the result. 
     <li>Run the steps to <a data-link-type="dfn" href="#update-the-state" id="ref-for-update-the-state-3">update the state</a> on <var>status</var>. 
     <li>Resolve <var>promise</var> with <var>status</var>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="common-permission-algorithms"><span class="secno">9. </span><span class="content"> Common permission algorithms </span><a class="self-link" href="#common-permission-algorithms"></a></h2>
    <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="boolean permission query algorithm" data-noexport="" id="boolean-permission-query-algorithm">boolean permission query algorithm<span class="dfn-panel" data-deco=""><b><a href="#boolean-permission-query-algorithm">#boolean-permission-query-algorithm</a></b><b>Referenced in:</b><span><a href="#ref-for-boolean-permission-query-algorithm-1">4. 
    Permission Registry </a></span></span></dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-12">PermissionDescriptor</a></code> <var>permissionDesc</var>, a <code class="idl"><a data-link-type="idl" href="#dictdef-permissionstorage" id="ref-for-dictdef-permissionstorage-10">PermissionStorage</a></code> <var>storage</var>, and a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-9">PermissionStatus</a></code> <var>status</var>, runs the following steps: </p>
    <ol class="algorithm">
     <li>Set <code><var>status</var>.state</code> to <code><var>storage</var>.state</code> 
    </ol>
    <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="boolean permission request algorithm" data-noexport="" id="boolean-permission-request-algorithm">boolean permission request algorithm<span class="dfn-panel" data-deco=""><b><a href="#boolean-permission-request-algorithm">#boolean-permission-request-algorithm</a></b><b>Referenced in:</b><span><a href="#ref-for-boolean-permission-request-algorithm-1">4. 
    Permission Registry </a></span></span></dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-13">PermissionDescriptor</a></code> <var>permission</var> and a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-10">PermissionStatus</a></code> <var>status</var>, runs the following steps: </p>
    <ol class="algorithm">
     <li>TODO 
    </ol>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="10" id="examples"><span class="secno">10. </span><span class="content"> Examples </span><a class="self-link" href="#examples"></a></h2>
    <div class="example" id="example-geolocation">
     <a class="self-link" href="#example-geolocation"></a> 
     <p> This example uses the Permissions API to decide whether local news
    should be shown using the Geolocation API or with a button offering to
    add the feature. </p>
<pre class="highlight">&lt;script>
  navigator.permissions.query({name:'geolocation'}).then(function(result) {
    if (result.state == 'granted') {
      showLocalNewsWithGeolocation();
    } else if (result.state == 'prompt') {
      showButtonToEnableLocalNews();
    }
    // Don’t do anything if the permission was denied.
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-notifications">
     <a class="self-link" href="#example-notifications"></a> 
     <p> This example is using the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-2">"notifications"</a></code> permission for a
    chat application to show a notification button depending on the
    permission state. </p>
<pre class="highlight">&lt;script>
  function updateNotificationButton(state) {
    document.getElementById('chat-notification-button').disabled = (state == 'denied');
  }

  navigator.permissions.query({name:'notifications'}).then(function(result) {
    updateNotificationButton(result.state);

    result.addEventListener('change', function() {
      updateNotificationButton(this.state);
    });
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-two-permissions">
     <a class="self-link" href="#example-two-permissions"></a> 
     <p> This example is checking whether the page has the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-2">"geolocation"</a></code> and the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-3">"notifications"</a></code> permissions
    using <code><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>.all</code>. </p>
<pre class="highlight">&lt;script>
  Promise.all([navigator.permissions.query({name:'geolocation'}),
               navigator.permissions.query({name:'notifications'})])
  .then(function(result) {
    console.log('Geolocation permission state is ' + result[0].state);
    console.log('Notifications permission state is ' + result[1].state);
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-deviceId">
     <a class="self-link" href="#example-deviceId"></a> 
     <p> This example is checking whether the page has the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-3">"camera"</a></code> permission for the first device in the list. Error checking omitted. </p>
<pre class="highlight">&lt;script>
  navigator.mediaDevices.enumerateDevices()
  .then(function(devices) {
     return navigator.permissions.query({name:'camera',
                                         deviceId: devices[0].deviceId})
  })
  .then(function(result) {
     console.log('Camera permission to first camera is ' + result.state);
  }
  .catch(err => console.log('Bad things happened: ' + err.name));
&lt;/script>
</pre>
    </div>
   </section>
   <section class="non-normative">
    <h2 class="no-num heading settled" id="acknowledgments"><span class="content"> Acknowledgments </span><a class="self-link" href="#acknowledgments"></a></h2>
    <p> The editors would like to thank Adrienne Porter Felt, Anne van
    Kesteren, Domenic Denicola, Jake Archibald and Wendy Seltzer for their
    help with the API design and editorial work. </p>
   </section>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
  <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
  <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is equivalent. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#associated-permissiondescriptor">associated PermissionDescriptor</a><span>, in §4</span>
   <li><a href="#dom-permissionname-background-sync">"background-sync"</a><span>, in §4.6</span>
   <li><a href="#boolean-permission">boolean permission</a><span>, in §4</span>
   <li><a href="#boolean-permission-query-algorithm">boolean permission query algorithm</a><span>, in §9</span>
   <li><a href="#boolean-permission-request-algorithm">boolean permission request algorithm</a><span>, in §9</span>
   <li><a href="#dom-permissionname-camera">"camera"</a><span>, in §4.5</span>
   <li><a href="#create-a-permissionstatus">create a PermissionStatus</a><span>, in §6</span>
   <li><a href="#create-a-permission-storage-entry">create a permission storage entry</a><span>, in §5</span>
   <li><a href="#delete-a-permission-storage-entry">delete a permission storage entry</a><span>, in §5</span>
   <li><a href="#dom-permissionstate-denied">"denied"</a><span>, in §6</span>
   <li><a href="#dom-devicepermissiondescriptor-deviceid">deviceId</a><span>, in §4.5</span>
   <li><a href="#dom-permissionname-device-info">"device-info"</a><span>, in §4.5</span>
   <li><a href="#dictdef-devicepermissiondescriptor">DevicePermissionDescriptor</a><span>, in §4.5</span>
   <li><a href="#dom-permissionname-geolocation">"geolocation"</a><span>, in §4.1</span>
   <li><a href="#get-a-permission-storage-identifier">get a permission storage identifier</a><span>, in §5</span>
   <li><a href="#dom-permissionstate-granted">"granted"</a><span>, in §6</span>
   <li><a href="#dom-permissionname-microphone">"microphone"</a><span>, in §4.5</span>
   <li><a href="#dom-permissionname-midi">"midi"</a><span>, in §4.4</span>
   <li><a href="#dictdef-midipermissiondescriptor">MidiPermissionDescriptor</a><span>, in §4.4</span>
   <li><a href="#dom-permissiondescriptor-name">name</a><span>, in §3</span>
   <li><a href="#dom-permissionname-notifications">"notifications"</a><span>, in §4.2</span>
   <li><a href="#dom-permissionstatus-onchange">onchange</a><span>, in §6</span>
   <li><a href="#dom-permissionstatus-permission-slot">[[permission]]</a><span>, in §6</span>
   <li><a href="#permission">permission</a><span>, in §4</span>
   <li><a href="#dictdef-permissiondescriptor">PermissionDescriptor</a><span>, in §3</span>
   <li><a href="#enumdef-permissionname">PermissionName</a><span>, in §4</span>
   <li><a href="#permission-query-algorithm">permission query algorithm</a><span>, in §4</span>
   <li><a href="#permission-request-algorithm">permission request algorithm</a><span>, in §4</span>
   <li><a href="#permission-result-type">permission result type</a><span>, in §4</span>
   <li><a href="#permission-revocation-algorithm">permission revocation algorithm</a><span>, in §4</span>
   <li>
    permissions
    <ul>
     <li><a href="#dom-navigator-permissions">attribute for Navigator</a><span>, in §7</span>
     <li><a href="#dom-workernavigator-permissions">attribute for WorkerNavigator</a><span>, in §7</span>
    </ul>
   <li><a href="#permissions">Permissions</a><span>, in §8</span>
   <li><a href="#enumdef-permissionstate">PermissionState</a><span>, in §6</span>
   <li><a href="#permissionstatus">PermissionStatus</a><span>, in §6</span>
   <li><a href="#dictdef-permissionstorage">PermissionStorage</a><span>, in §5</span>
   <li><a href="#permission-storage-identifier">permission storage identifier</a><span>, in §5</span>
   <li><a href="#permission-storage-type">permission storage type</a><span>, in §4</span>
   <li><a href="#permission-store">Permission Store</a><span>, in §Unnumbered section</span>
   <li><a href="#permission-task-source">permission task source</a><span>, in §6</span>
   <li><a href="#dom-permissionstate-prompt">"prompt"</a><span>, in §6</span>
   <li><a href="#dom-permissionname-push">"push"</a><span>, in §4.3</span>
   <li><a href="#dictdef-pushpermissiondescriptor">PushPermissionDescriptor</a><span>, in §4.3</span>
   <li><a href="#dom-permissionstatus-query-slot">[[query]]</a><span>, in §6</span>
   <li><a href="#query-a-permission">query a
    permission</a><span>, in §8</span>
   <li><a href="#dom-permissions-query">query(permissionDesc)</a><span>, in §8</span>
   <li><a href="#request-a-permission">request a
    permission</a><span>, in §8</span>
   <li><a href="#dom-permissions-request">request(permissionDesc)</a><span>, in §8</span>
   <li><a href="#retrieve-a-permission-storage-entry">retrieve a permission storage entry</a><span>, in §5</span>
   <li><a href="#retrieve-the-permission-storage">retrieve the permission storage</a><span>, in §6</span>
   <li><a href="#revoke-a-permission">revoke a permission</a><span>, in §8</span>
   <li><a href="#dom-permissions-revoke">revoke(permissionDesc)</a><span>, in §8</span>
   <li><a href="#dom-permissionname-speaker">"speaker"</a><span>, in §4.5</span>
   <li>
    state
    <ul>
     <li><a href="#dom-permissionstorage-state">dict-member for PermissionStorage</a><span>, in §5</span>
     <li><a href="#dom-permissionstatus-state">attribute for PermissionStatus</a><span>, in §6</span>
    </ul>
   <li><a href="#dom-midipermissiondescriptor-sysex">sysex</a><span>, in §4.4</span>
   <li><a href="#update-the-state">update the state</a><span>, in §6</span>
   <li><a href="#dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly</a><span>, in §4.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#window">Window</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#worker">Worker</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event type</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handlers</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#parent-browsing-context">parent browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[promises-guide]</a> defines the following terms:
    <ul>
     <li><a href="https://www.w3.org/2001/tag/doc/promises-guide#promise-calling">promise-calling</a>
     <li><a href="https://www.w3.org/2001/tag/doc/promises-guide#transforming-by">transforming</a>
    </ul>
   <li>
    <a data-link-type="biblio">[uievents]</a> defines the following terms:
    <ul>
     <li><a href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#dom-promise">Promise</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.github.io/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-promises-guide">[PROMISES-GUIDE]
   <dd>Domenic Denicola. <a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing Promise-Using Specifications</a>. 16 February 2016. Finding of the W3C TAG. URL: <a href="https://www.w3.org/2001/tag/doc/promises-guide">https://www.w3.org/2001/tag/doc/promises-guide</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/">UI Events Specification</a>. 15 December 2015. WD. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-audio-output">[AUDIO-OUTPUT]
   <dd>Justin Uberti; Victoria Kirst. <a href="http://www.w3.org/TR/audio-output/">Audio Output Devices API</a>. 10 February 2015. WD. URL: <a href="http://www.w3.org/TR/audio-output/">http://www.w3.org/TR/audio-output/</a>
   <dt id="biblio-geolocation-api">[geolocation-API]
   <dd>Andrei Popescu. <a href="http://www.w3.org/TR/geolocation-API/">Geolocation API Specification</a>. 28 May 2015. PER. URL: <a href="http://www.w3.org/TR/geolocation-API/">http://www.w3.org/TR/geolocation-API/</a>
   <dt id="biblio-getusermedia">[GETUSERMEDIA]
   <dd>Daniel Burnett; et al. <a href="http://www.w3.org/TR/mediacapture-streams/">Media Capture and Streams</a>. 14 April 2015. LCWD. URL: <a href="http://www.w3.org/TR/mediacapture-streams/">http://www.w3.org/TR/mediacapture-streams/</a>
   <dt id="biblio-notifications">[NOTIFICATIONS]
   <dd>Anne van Kesteren. <a href="https://notifications.spec.whatwg.org/">Notifications API Standard</a>. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
   <dt id="biblio-push-api">[PUSH-API]
   <dd>Michael van Ouwerkerk; et al. <a href="http://www.w3.org/TR/push-api/">Push API</a>. 15 December 2015. WD. URL: <a href="http://www.w3.org/TR/push-api/">http://www.w3.org/TR/push-api/</a>
   <dt id="biblio-web-background-sync">[WEB-BACKGROUND-SYNC]
   <dd><a href="https://wicg.github.io/BackgroundSync/spec/">Web Background Synchronization specification draft</a>. URL: <a href="https://wicg.github.io/BackgroundSync/spec/">https://wicg.github.io/BackgroundSync/spec/</a>
   <dt id="biblio-webmidi">[WEBMIDI]
   <dd>Chris Wilson; Jussi Kalliokoski. <a href="http://www.w3.org/TR/webmidi/">Web MIDI API</a>. 17 March 2015. WD. URL: <a href="http://www.w3.org/TR/webmidi/">http://www.w3.org/TR/webmidi/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">dictionary <a href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  required <a data-link-type="idl-name" href="#enumdef-permissionname">PermissionName</a> <a data-type="PermissionName " href="#dom-permissiondescriptor-name">name</a>;
};

enum <a href="#enumdef-permissionname">PermissionName</a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation">"geolocation"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications">"notifications"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push">"push"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi">"midi"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera">"camera"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone">"microphone"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker">"speaker"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info">"device-info"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync">"background-sync"</a>,
};

dictionary <a href="#dictdef-pushpermissiondescriptor">PushPermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  boolean <a data-default="false" data-type="boolean " href="#dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly</a> = false;
};

dictionary <a href="#dictdef-midipermissiondescriptor">MidiPermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  boolean <a data-default="false" data-type="boolean " href="#dom-midipermissiondescriptor-sysex">sysex</a> = false;
};

dictionary <a href="#dictdef-devicepermissiondescriptor">DevicePermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  DOMString <a data-type="DOMString " href="#dom-devicepermissiondescriptor-deviceid">deviceId</a>;
};

dictionary <a href="#dictdef-permissionstorage">PermissionStorage</a> {
  // PermissionStorage is just an explanatory device.
  // Instances are never received from or passed to Javascript code.

  required <a data-link-type="idl-name" href="#enumdef-permissionstate">PermissionState</a> <a data-type="PermissionState " href="#dom-permissionstorage-state">state</a>;
};

enum <a href="#enumdef-permissionstate">PermissionState</a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted">"granted"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied">"denied"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt">"prompt"</a>,
};

[Exposed=(Window,Worker)]
interface <a href="#permissionstatus">PermissionStatus</a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  readonly attribute <a data-link-type="idl-name" href="#enumdef-permissionstate">PermissionState</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="PermissionState " href="#dom-permissionstatus-state">state</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler " href="#dom-permissionstatus-onchange">onchange</a>;
};

[Exposed=(Window)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions">Permissions</a> <a data-readonly="" data-type="Permissions " href="#dom-navigator-permissions">permissions</a>;
};

[Exposed=(Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions">Permissions</a> <a data-readonly="" data-type="Permissions " href="#dom-workernavigator-permissions">permissions</a>;
};

[Exposed=(Window,Worker)]
interface <a href="#permissions">Permissions</a> {
  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query">query</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-query-permissiondesc-permissiondesc">permissionDesc</a>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-request">request</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-request-permissiondesc-permissiondesc">permissionDesc</a>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-revoke">revoke</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-revoke-permissiondesc-permissiondesc">permissionDesc</a>);
};

</pre>
<script>
        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            while(el.parentElement) {
                if(el.tagName == "DFN") {
                    target = "dfn";
                    break;
                }
                if(/H\d/.test(el.tagName) && el.getAttribute('data-dfn-type') != null) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn") {
                // open the panel
                var dfnPanel = el.querySelector(".dfn-panel");
                if(dfnPanel) {
                    dfnPanel.classList.add("on");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
            }

        });
        </script>