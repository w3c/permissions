<!DOCTYPE html><html lang="en" dir="ltr"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 26.13.2">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
aside.example,div.example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example,div.example{padding:.5em;border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
aside.example div.example span.example-title{color:#999}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;color:#fff;font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste.selected:focus,.respec-button-copy-paste:focus:hover{border-color:#51a7e8}
.respec-button-copy-paste.zeroclipboard-is-active,.respec-button-copy-paste.zeroclipboard-is-hover,.respec-button-copy-paste:active,.respec-button-copy-paste:hover{text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste.selected,.respec-button-copy-paste.zeroclipboard-is-active,.respec-button-copy-paste:active{background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste.disabled,.respec-button-copy-paste.disabled:hover,.respec-button-copy-paste:disabled,.respec-button-copy-paste:disabled:hover{color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
<title>Permissions API</title>
    
    
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
.hljs{background:0 0!important}
a abbr,h1 abbr,h2 abbr,h3 abbr,h4 abbr,h5 abbr,h6 abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
h2,h3,h4,h5,h6{position:relative}
aside.example .marker>a.self-link{color:inherit}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{border:none;color:inherit;font-size:83%;height:2em;left:-1.6em;opacity:.5;position:absolute;text-align:center;text-decoration:none;top:0;transition:opacity .2s;width:2em}
h2>a.self-link::before,h3>a.self-link::before,h4>a.self-link::before,h5>a.self-link::before,h6>a.self-link::before{content:"§";display:block}
@media (max-width:767px){
dd{margin-left:0}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{left:auto;top:auto}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style>
.mdn{font-size:.75em;position:absolute;right:.3em;min-width:0;margin-top:3em}
.mdn details{width:100%;margin:1px 0;position:relative;z-index:10;box-sizing:border-box;padding:.4em;padding-top:0}
.mdn details[open]{min-width:25ch;max-width:32ch;background:#fff;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px;z-index:11;margin-bottom:.4em}
.mdn summary{text-align:right;cursor:default;margin-right:-.4em}
.mdn summary span{font-family:zillaslab,Palatino,"Palatino Linotype",serif;color:#fff;background-color:#000;display:inline-block;padding:3px}
.mdn a{display:inline-block;word-break:break-all}
.mdn p{margin:0}
.mdn .engines-all{color:#058b00}
.mdn .engines-some{color:#b00}
.mdn table{width:100%;font-size:.9em}
.mdn td{border:none}
.mdn td:nth-child(2){text-align:right}
.mdn .nosupportdata{font-style:italic;margin:0}
.mdn tr::before{content:"";display:table-cell;width:1.5em;height:1.5em;background:no-repeat center center/contain;font-size:.75em}
.mdn .no,.mdn .unknown{color:#ccc;filter:grayscale(100%)}
.mdn .no::before,.mdn .unknown::before{opacity:.5}
.mdn .chrome::before,.mdn .chrome_android::before{background-image:url(https://resources.whatwg.org/browser-logos/chrome.svg)}
.mdn .edge::before,.mdn .edge_mobile::before{background-image:url(https://resources.whatwg.org/browser-logos/edge.svg)}
.mdn .firefox::before,.mdn .firefox_android::before{background-image:url(https://resources.whatwg.org/browser-logos/firefox.png)}
.mdn .ie::before{background-image:url(https://resources.whatwg.org/browser-logos/ie.png)}
.mdn .opera::before,.mdn .opera_android::before{background-image:url(https://resources.whatwg.org/browser-logos/opera.svg)}
.mdn .safari::before{background-image:url(https://resources.whatwg.org/browser-logos/safari.png)}
.mdn .safari_ios::before{background-image:url(https://resources.whatwg.org/browser-logos/safari-ios.svg)}
.mdn .samsunginternet_android::before{background-image:url(https://resources.whatwg.org/browser-logos/samsung.svg)}
.mdn .webview_android::before{background-image:url(https://resources.whatwg.org/browser-logos/android-webview.png)}
</style>
<meta name="description" content="The Permissions API specification defines common infrastructure that other
        specifications can use to interact with browser permissions that allow or deny access to
        powerful features on the web platform. For developers, the specification defines an API to
        query the permission state of a powerful feature, or be notified if a permission for a
        powerful feature changes state.">
<link rel="canonical" href="https://www.w3.org/TR/permissions/">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "shortName": "permissions",
  "group": "webappsec",
  "specStatus": "ED",
  "editors": [
    {
      "name": "Marcos Cáceres",
      "url": "https://www.w3.org/",
      "company": "W3C",
      "companyURL": "https://www.w3.org/",
      "w3cid": "39125"
    },
    {
      "name": "Mike Taylor",
      "url": "https://miketaylr.com/posts/",
      "companyURL": "https://google.com/",
      "company": "Google LLC",
      "w3cid": "90704"
    }
  ],
  "formerEditors": [
    {
      "name": "Mounir Lamouri",
      "companyURL": "https://google.com/",
      "company": "Google LLC"
    },
    {
      "name": "Jeffrey Yasskin",
      "companyURL": "https://google.com/",
      "company": "Google LLC",
      "w3cid": "72192"
    }
  ],
  "github": {
    "branch": "main",
    "repoURL": "w3c/permissions"
  },
  "mdn": true,
  "xref": "web-platform",
  "publishISODate": "2021-08-31T00:00:00.000Z",
  "generatedSubtitle": "Editor's Draft 31 August 2021"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED"></head>
  <body class="h-entry" data-cite="WebIDL HTML INFRA URL WEBIDL DOM FETCH"><div class="head">
    <a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72">
  </a> <h1 id="title" class="title">Permissions API</h1>
    <h2 id="subtitle" class="subtitle">Interacting with Permissions for Powerful Features</h2>
    <h2>
      W3C Editor's Draft
      <time class="dt-published" datetime="2021-08-31">31 August 2021</time>
    </h2>
    <dl>
      <dt>This version:</dt><dd>
              <a class="u-url" href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
            </dd><dt>Latest published version:</dt><dd>
              <a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
            </dd>
      <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a></dd>
      
      
      
      
      
      <dt>Editors:</dt>
      <dd class="editor p-author h-card vcard" data-editor-id="39125">
    <a class="u-url url p-name fn" href="https://www.w3.org/">Marcos Cáceres</a> (<a class="p-org org h-org" href="https://www.w3.org/">W3C</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="90704">
    <a class="u-url url p-name fn" href="https://miketaylr.com/posts/">Mike Taylor</a> (<a class="p-org org h-org" href="https://google.com/">Google LLC</a>)
  </dd>
      <dt>
              Former editors:
            </dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Mounir Lamouri</span> (<a class="p-org org h-org" href="https://google.com/">Google LLC</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="72192">
    <span class="p-name fn">Jeffrey Yasskin</span> (<a class="p-org org h-org" href="https://google.com/">Google LLC</a>)
  </dd>
      
      <dt>Participate:</dt><dd>
    <a href="https://github.com/w3c/permissions/">GitHub w3c/permissions</a>
  </dd><dd>
    <a href="https://github.com/w3c/permissions/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/w3c/permissions/commits/main">Commit history</a>
  </dd><dd>
    <a href="https://github.com/w3c/permissions/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2021
    
    <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
    <a href="https://ev.buaa.edu.cn/">Beihang</a>). 
    W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules
    apply.
  </p>
    <hr title="Separator for header">
  </div>
    
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>
        The <cite>Permissions API</cite> specification defines common infrastructure that other
        specifications can use to interact with browser permissions that allow or deny access to
        powerful features on the web platform. For developers, the specification defines an API to
        query the permission state of a powerful feature, or be notified if a permission for a
        powerful feature changes state.
      </p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. Other documents may supersede
      this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision
      of this technical report can be found in the
      <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
      <p>
        This is a work in progress.
      </p>
      <p>
        Some features in this specification are supported by only one user agent, and as such, are
        marked as <dfn id="dfn-at-risk" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">at risk</dfn>.
      </p>
    <p>
    This document was published by the <a href="https://www.w3.org/2011/webappsec/">Web Application Security Working Group</a> as an
    Editor's Draft. 
    
  </p><p>
    <a href="https://github.com/w3c/permissions/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    
  </p><p>
      Publication as an Editor's Draft does not imply endorsement
      by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. 
    </p><p>This is a draft document and may be updated, replaced
  or obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress.
  </p><p></p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">1 August 2017 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
       
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/webappsec/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
    
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2020/Process-20200915/">15 September 2020 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">1. </bdi>
        Examples of usage
      </a></li><li class="tocline"><a class="tocxref" href="#model"><bdi class="secno">2. </bdi>
        Model
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#permissions"><bdi class="secno">2.1 </bdi>
          Permissions
        </a></li><li class="tocline"><a class="tocxref" href="#powerful-features"><bdi class="secno">2.2 </bdi>
          Powerful features
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#specifying-a-powerful-feature"><bdi class="secno">2.2.1 </bdi>
            Specifying a powerful feature
          </a></li><li class="tocline"><a class="tocxref" href="#aspects"><bdi class="secno">2.2.2 </bdi>
            Aspects
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#reading-current-states"><bdi class="secno">2.3 </bdi>
          Reading the current permission state
        </a></li><li class="tocline"><a class="tocxref" href="#requesting-more-permission"><bdi class="secno">2.4 </bdi>
          Requesting permission to use a powerful feature
        </a></li><li class="tocline"><a class="tocxref" href="#prompt-the-user-to-choose"><bdi class="secno">2.5 </bdi>
          Prompt the user to choose
        </a></li><li class="tocline"><a class="tocxref" href="#reacting-to-revocation"><bdi class="secno">2.6 </bdi>
          Reacting to users revoking permission
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#navigator-and-workernavigator-extension"><bdi class="secno">3. </bdi>
        Extensions to the <code>Navigator</code> and <code>WorkerNavigator</code> interfaces
      </a></li><li class="tocline"><a class="tocxref" href="#permissions-interface"><bdi class="secno">4. </bdi>
        <code>Permissions</code> interface
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#query-method"><bdi class="secno">4.1 </bdi>
          <code>query()</code> method
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#permissionstatus-interface"><bdi class="secno">5. </bdi>
        <code>PermissionStatus</code> interface
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#creating-instances"><bdi class="secno">5.1 </bdi>
          Creating instances
        </a></li><li class="tocline"><a class="tocxref" href="#name-attribute"><bdi class="secno">5.2 </bdi>
          <code>name</code> attribute
        </a></li><li class="tocline"><a class="tocxref" href="#state-attribute"><bdi class="secno">5.3 </bdi>
          <code>state</code> attribute
        </a></li><li class="tocline"><a class="tocxref" href="#onchange-attribute"><bdi class="secno">5.4 </bdi>
          <code>onchange</code> attribute
        </a></li><li class="tocline"><a class="tocxref" href="#permissionstatus-gc"><bdi class="secno">5.5 </bdi>
          Garbage collection
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#powerful-features-registry"><bdi class="secno">6. </bdi>
        Powerful features registry
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#geolocation"><bdi class="secno">6.1 </bdi>
          Geolocation
        </a></li><li class="tocline"><a class="tocxref" href="#notifications"><bdi class="secno">6.2 </bdi>
          Notifications
        </a></li><li class="tocline"><a class="tocxref" href="#push"><bdi class="secno">6.3 </bdi>
          Push
        </a></li><li class="tocline"><a class="tocxref" href="#midi"><bdi class="secno">6.4 </bdi>
          Midi
        </a></li><li class="tocline"><a class="tocxref" href="#screen-wake-lock"><bdi class="secno">6.5 </bdi>
          Screen wake lock
        </a></li><li class="tocline"><a class="tocxref" href="#media-devices"><bdi class="secno">6.6 </bdi>
          Media Devices
        </a></li><li class="tocline"><a class="tocxref" href="#background-fetch"><bdi class="secno">6.7 </bdi>
          Background Fetch
        </a></li><li class="tocline"><a class="tocxref" href="#background-sync"><bdi class="secno">6.8 </bdi>
          Background Sync
        </a></li><li class="tocline"><a class="tocxref" href="#bluetooth"><bdi class="secno">6.9 </bdi>
          Bluetooth
        </a></li><li class="tocline"><a class="tocxref" href="#persistent-storage"><bdi class="secno">6.10 </bdi>
          Persistent Storage
        </a></li><li class="tocline"><a class="tocxref" href="#ambient-light-sensor"><bdi class="secno">6.11 </bdi>
          Ambient Light Sensor
        </a></li><li class="tocline"><a class="tocxref" href="#accelerometer"><bdi class="secno">6.12 </bdi>
          Accelerometer
        </a></li><li class="tocline"><a class="tocxref" href="#gyroscope"><bdi class="secno">6.13 </bdi>
          Gyroscope
        </a></li><li class="tocline"><a class="tocxref" href="#magnetometer"><bdi class="secno">6.14 </bdi>
          Magnetometer
        </a></li><li class="tocline"><a class="tocxref" href="#display-capture"><bdi class="secno">6.15 </bdi>
          Display Capture
        </a></li><li class="tocline"><a class="tocxref" href="#nfc"><bdi class="secno">6.16 </bdi>
          NFC
        </a></li><li class="tocline"><a class="tocxref" href="#xr-api"><bdi class="secno">6.17 </bdi>
          XR Spatial tracking
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">7. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#relationship-to-permissions-policy"><bdi class="secno">A. </bdi>
        Relationship to the Permissions Policy specification
      </a></li><li class="tocline"><a class="tocxref" href="#automation"><bdi class="secno">B. </bdi>
        Automated testing
      </a></li><li class="tocline"><a class="tocxref" href="#privacy-considerations"><bdi class="secno">C. </bdi>
        Security and privacy considerations
      </a></li><li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">D. </bdi>IDL Index</a></li><li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">E. </bdi>
        Acknowledgments
      </a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">F. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">F.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">F.2 </bdi>Informative references</a></li></ol></li></ol></nav>
    <section class="informative" id="examples-of-usage">
      <h2 id="examples"><bdi class="secno">1. </bdi>
        Examples of usage
      <a class="self-link" aria-label="§" href="#examples"></a></h2><p><em>This section is non-normative.</em></p>
      <p>
        This example uses the Permissions API to decide whether local news should be shown using
        the Geolocation API or with a button offering to add the feature.
      </p>
      <div class="example" id="example-1-using-state-attribute">
        <div class="marker">
    <a class="self-link" href="#example-1-using-state-attribute">Example<bdi> 1</bdi></a><span class="example-title">: Using .state attribute</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> { state } = <span class="hljs-keyword">await</span> navigator.permissions.query({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"geolocation"</span>
});
<span class="hljs-keyword">switch</span> (state) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">"granted"</span>:
    showLocalNewsWithGeolocation();
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> <span class="hljs-string">"prompt"</span>:
    showButtonToEnableLocalNews();
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> <span class="hljs-string">"denied"</span>:
    showNationalNews();
    <span class="hljs-keyword">break</span>;
}</code></pre>
      </div>
      <p>
        This example is checking whether the page has the "<a data-link-type="idl" href="#dom-permissionname-geolocation" class="internalDFN" id="ref-for-dom-permissionname-geolocation-1"><code>geolocation</code></a>" and the
        "<a data-link-type="idl" href="#dom-permissionname-notifications" class="internalDFN" id="ref-for-dom-permissionname-notifications-1"><code>notifications</code></a>" permissions:
      </p>
      <div class="example" id="example-2-checking-the-state-of-multiple-permissions">
        <div class="marker">
    <a class="self-link" href="#example-2-checking-the-state-of-multiple-permissions">Example<bdi> 2</bdi></a><span class="example-title">: Checking the state of multiple permissions</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> queryPromises = [<span class="hljs-string">"geolocation"</span>, <span class="hljs-string">"notifications"</span>].map(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> navigator.permissions.query({ name });
});
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> status <span class="hljs-keyword">of</span> queryPromises) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${status.name}</span>: <span class="hljs-subst">${status.state}</span>`</span>);
}</code></pre>
      </div>
      <p>
        This example is checking the permission state of the available cameras.
      </p>
      <div class="example" id="example-3">
        <div class="marker">
    <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> devices = <span class="hljs-keyword">await</span> navigator.mediaDevices.enumerateDevices();

<span class="hljs-comment">// filter on video inputs, and map to query object</span>
<span class="hljs-keyword">const</span> queries = devices
  .filter(<span class="hljs-function">(<span class="hljs-params">{ kind }</span>) =&gt;</span> kind === <span class="hljs-string">"videoinput"</span>)
  .map(<span class="hljs-function">(<span class="hljs-params">{ deviceId }</span>) =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">"camera"</span>, deviceId }));

<span class="hljs-keyword">const</span> promises = queries.map(<span class="hljs-function">(<span class="hljs-params">queryObj</span>) =&gt;</span>
  navigator.permissions.query(queryObj)
);

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(promises);
  <span class="hljs-comment">// log the state of each camera</span>
  results.forEach(<span class="hljs-function">(<span class="hljs-params">{ state }, i</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Camera"</span>, i, state));
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-built_in">console</span>.error(error);
}</code></pre>
      </div>
    </section>
    <section id="model">
      <h2 id="x2-model"><bdi class="secno">2. </bdi>
        Model
      <a class="self-link" aria-label="§" href="#model"></a></h2>
      <p>
        This section specifies a model for <a data-link-type="dfn" href="#dfn-permission" class="internalDFN" id="ref-for-dfn-permission-1">permissions</a> to use <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-1">powerful features</a> on the Web
        platform.
      </p>
      <section id="permissions">
        <h3 id="x2-1-permissions"><bdi class="secno">2.1 </bdi>
          Permissions
        <a class="self-link" aria-label="§" href="#permissions"></a></h3>
        <p>
          A <dfn class="export" data-export="" data-plurals="permissions" id="dfn-permission" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission</dfn> represents a user's decision to allow a web
          application to access a <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-2">powerful feature</a>.
        </p>
        <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span><span class="issue-label">: Limitations</span></div><aside class="">
          <p>
            Current Web APIs have different ways to deal with permissions. For example, the
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-notifications" title="Notifications API Standard">notifications</a></cite>] API allows developers to request a permission and check the
            permission status explicitly. Others expose the status to web pages when they try to
            use the API, like the [<cite><a class="bibref" data-link-type="biblio" href="#bib-geolocation" title="Geolocation API">Geolocation</a></cite>] which fails if the permission was not granted
            without allowing the developer to check beforehand.
          </p>
          <p>
            The solution described in this document is meant to be extensible, but isn't expected
            to be applicable to all the current and future permissions available in the web
            platform. Working Groups that are creating specifications whose permission model
            doesn't fit in the model described in this document should contact the editors by
            <a href="https://github.com/w3c/permissions/issues">filing an issue</a>.
          </p>
        </aside></div>
        <p>
          Conceptually, a <a data-link-type="dfn" href="#dfn-permission" class="internalDFN" id="ref-for-dfn-permission-2">permission</a> can be in one of the following <dfn data-dfn-for="permission" id="dfn-states" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">states</dfn>:
        </p>
        <dl>
          <dt>
            <dfn class="export" data-dfn-for="permission" data-export="" id="dfn-prompt" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Prompt</dfn>:
          </dt>
          <dd>
            The prompt <a data-link-type="dfn" href="#dfn-permission-state" class="internalDFN" id="ref-for-dfn-permission-state-1">state</a> represents that the user has not made a decision (i.e.,
            it's the same a <a data-link-type="dfn" href="#dfn-denied" class="internalDFN" id="ref-for-dfn-denied-1">denied</a>), and the <a data-link-type="dfn" data-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a> will be asking the user
            for permission if the caller tries to access the feature. The user might then grant,
            deny, ignore, or dismiss the request.
          </dd>
          <dt>
            <dfn class="export" data-local-lt="grant" data-dfn-for="permission" data-export="" data-lt="Granted|grant" id="dfn-granted" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Granted</dfn>:
          </dt>
          <dd>
            The granted <a data-link-type="dfn" href="#dfn-permission-state" class="internalDFN" id="ref-for-dfn-permission-state-2">state</a> represents that the caller will be able to
            successfully access the feature without having the <a data-link-type="dfn" data-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a> asking the user's
            permission.
          </dd>
          <dt>
            <dfn class="export" data-dfn-for="permission" data-export="" id="dfn-denied" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Denied</dfn>:
          </dt>
          <dd>
            The denied <a data-link-type="dfn" href="#dfn-permission-state" class="internalDFN" id="ref-for-dfn-permission-state-3">state</a> represents that the caller will not be able to access
            the feature.
          </dd>
        </dl>
        <p>
          To ascertain <dfn class="export" data-export="" id="dfn-new-information-about-the-user-s-intent" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">new information about the user's intent</dfn>, a user
          agent <em class="rfc2119">MAY</em> collect information about a user's intentions. This information can come from
          explicit user action, aggregate behavior of both the relevant user and other users, or
          <dfn id="dfn-implicit-signals" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">implicit signals</dfn> this specification hasn't anticipated.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span><span class="issue-label">: Implicit signals</span></div><aside class="" data-cite="appmanifest">
          <p>
            The <a href="#dfn-implicit-signals" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-implicit-signals-1">implicit signals</a> could be, for example, the <a data-link-type="dfn" data-lt="installed web application" data-type="dfn" href="https://www.w3.org/TR/appmanifest/#dfn-installed-web-application">install</a> status of a web application or frequency and recency of visits. A
            user that has installed a web application and used it frequently and recently is more
            likely to trust it. Implementations are advised to exercise caution when relying on
            implicit signals.
          </p>
        </aside></div>
      </section>
      <section id="powerful-features">
        <h3 id="x2-2-powerful-features"><bdi class="secno">2.2 </bdi>
          Powerful features
        <a class="self-link" aria-label="§" href="#powerful-features"></a></h3>
        <p>
          A <dfn class="export" data-local-lt="feature" data-export="" data-lt="powerful feature|feature" data-plurals="powerful features" id="dfn-powerful-feature" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">powerful feature</dfn> is a web platform
          feature (usually an API) for which a user has to <a data-link-type="dfn" href="#dfn-granted" class="internalDFN" id="ref-for-dfn-granted-1">grant</a> <a data-link-type="dfn" href="#dfn-permission" class="internalDFN" id="ref-for-dfn-permission-3">permission</a>
          before the feature can be used. Access to the feature is determined by the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment
          settings object</a> by the user having <a data-link-type="dfn" href="#dfn-granted" class="internalDFN" id="ref-for-dfn-granted-2">granted</a> permission via UI, or by
          satisfying some criteria that is equivalent to a permission <a data-link-type="dfn" href="#dfn-granted" class="internalDFN" id="ref-for-dfn-granted-3">grant</a>.
        </p>
        <p>
          A <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-3">powerful feature</a> is identified by its <dfn data-dfn-for="powerful feature" id="dfn-name" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">name</dfn>, which is a string literal (e.g., "geolocation").
        </p>
        <p>
          The user agent is responsible for tracking what <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-4">powerful features</a> each <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a> has the user's <a data-link-type="dfn" href="#dfn-permission" class="internalDFN" id="ref-for-dfn-permission-4">permission</a> to use. Other specifications can use the
          operations defined in this section to retrieve the UA's notion of what permissions are
          granted or denied, and to ask the user to grant or deny more permissions.
        </p>
        <section id="specifying-a-powerful-feature">
          <h4 id="x2-2-1-specifying-a-powerful-feature"><bdi class="secno">2.2.1 </bdi>
            Specifying a powerful feature
          <a class="self-link" aria-label="§" href="#specifying-a-powerful-feature"></a></h4>
          <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div><p class="">
            Specifications wanting to add a new <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-5">powerful feature</a> are encouraged to coordinate
            with us on this specification via GitHub.
          </p></div>
          <p>
            Each <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-6">powerful feature</a> has the following permission-related flags, algorithms,
            and types. When the defaults are not suitable for a particular <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-7">powerful feature</a>,
            a specification <em class="rfc2119">MAY</em> override below flags, algorithms, and types below.
          </p>
          <dl>
            <dt>
              An <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-allowed-in-non-secure-contexts" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">allowed in non-secure
              contexts</dfn> flag:
            </dt>
            <dd>
              By default, only <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">secure contexts</a> can use <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-8">powerful features</a>. If this
              flag is set for a feature, the UA may grant access to it in <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context">non-secure
              contexts</a> too.
            </dd>
            <dt>
              A <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-permission-descriptor-type" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission descriptor
              type</dfn>:
            </dt>
            <dd>
              <p>
                <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-1"><code>PermissionDescriptor</code></a> or one of its subtypes. If unspecified, this defaults to
                <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-2"><code>PermissionDescriptor</code></a>.
              </p>
              <p>
                The feature can define a <a href="https://en.wikipedia.org/wiki/Partially_ordered_set">partial order</a> on
                descriptor instances. If <var>descriptorA</var> is <dfn data-dfn-for="PermissionDescriptor" id="dfn-stronger-than" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">stronger than</dfn> <var>descriptorB</var>, then if <var>descriptorA</var>'s
                <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-4">permission state</a> is "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-1"><code>granted</code></a>", <var>descriptorB</var>'s
                <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-5">permission state</a> must also be "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-2"><code>granted</code></a>", and if
                <var>descriptorB</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-6">permission state</a> is "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-1"><code>denied</code></a>",
                <var>descriptorA</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-7">permission state</a> must also be "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-2"><code>denied</code></a>".
              </p>
              <p class="example" id="example-stronger-than">
                <code>{name: "<a data-link-type="idl" href="#dom-permissionname-midi" class="internalDFN" id="ref-for-dom-permissionname-midi-1"><code>midi</code></a>", sysex: true}</code> ("midi-with-sysex") is
                <a data-link-type="dfn" href="#dfn-stronger-than" class="internalDFN" id="ref-for-dfn-stronger-than-1">stronger than</a> <code>{name: "<a data-link-type="idl" href="#dom-permissionname-midi" class="internalDFN" id="ref-for-dom-permissionname-midi-2"><code>midi</code></a>",
                sysex: false}</code> ("midi-without-sysex"), so if the user denies access to
                midi-without-sysex, the UA must also deny access to midi-with-sysex, and similarly
                if the user grants access to midi-with-sysex, the UA must also grant access to
                midi-without-sysex.
              </p>
            </dd>
            <dt>
              Optional <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-permission-state-constraints" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission state
              constraints</dfn>:
            </dt>
            <dd>
              Constraints on the values that the UA can return as a descriptor's <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-8">permission
              state</a>. Defaults to no constraints beyond the user's intent.
            </dd>
            <dt>
              An optional <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-extra-permission-data-type" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">extra permission data
              type</dfn>:
            </dt>
            <dd>
              <p data-cite="mediacapture-streams">
                Some <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-9">powerful features</a> have more information associated with them than just
                a <a data-link-type="idl" data-lt="PermissionState" href="#dom-permissionstate" class="internalDFN" id="ref-for-dom-permissionstate-1"><code>PermissionState</code></a>. For example, <a data-link-type="idl" data-lt="getUserMedia()" data-type="method" href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-getusermedia"><code>getUserMedia</code></a><code>()</code> needs to
                determine <em>which</em> cameras the user has granted the <a href="https://tc39.es/ecma262/multipage/#current-realm">current realm</a> permission to access. Each of these
                features defines an <a data-link-type="dfn" href="#dfn-extra-permission-data-type" class="internalDFN" id="ref-for-dfn-extra-permission-data-type-1">extra permission data type</a>. If a
                <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-1"><code>PermissionName</code></a> <var>name</var> names one of these features, then <var>name</var>'s
                <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-extra-permission-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">extra permission data</dfn> for
                an optional <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a> <var>settings</var> is the result of the
                following algorithm:
              </p>
              <ol class="algorithm">
                <li>If <var>settings</var> wasn't passed, set it to the <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>.
                </li>
                <li>If there was a previous invocation of this algorithm with the same <var>name</var> and
                <var>settings</var>, returning <var>previousResult</var>, and the UA has not received <a href="#dfn-new-information-about-the-user-s-intent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-new-information-about-the-user-s-intent-1">new
                information about the user's intent</a> since that invocation, return
                <var>previousResult</var>.
                </li>
                <li>Return the instance of <var>name</var>'s <a data-link-type="dfn" href="#dfn-extra-permission-data-type" class="internalDFN" id="ref-for-dfn-extra-permission-data-type-2">extra permission data type</a>
                that matches the UA's impression of the user's intent, taking into account any
                <a data-link-type="dfn" href="#dfn-extra-permission-data-constraints" class="internalDFN" id="ref-for-dfn-extra-permission-data-constraints-1">extra permission data constraints</a> for <var>name</var>.
                </li>
              </ol>
              <p>
                If specified, the <a data-link-type="dfn" href="#dfn-extra-permission-data" class="internalDFN" id="ref-for-dfn-extra-permission-data-1">extra permission data</a> algorithm is usable
                for this feature.
              </p>
            </dd>
            <dt>
              Optional <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-extra-permission-data-constraints" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">extra permission data
              constraints</dfn>:
            </dt>
            <dd>
              Constraints on the values that the UA can return as a <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-2"><code>PermissionName</code></a>'s <a data-link-type="dfn" href="#dfn-extra-permission-data" class="internalDFN" id="ref-for-dfn-extra-permission-data-2">extra permission data</a>. Defaults to no constraints beyond the user's intent.
            </dd>
            <dt>
              A <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-permission-result-type" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission result type</dfn>:
            </dt>
            <dd>
              <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-1"><code>PermissionStatus</code></a> or one of its subtypes. If unspecified, this defaults to
              <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-2"><code>PermissionStatus</code></a>.
            </dd>
            <dt>
              A <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-permission-query-algorithm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission query
              algorithm</dfn>:
            </dt>
            <dd>
              <p>
                Takes an instance of the <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-1">permission descriptor type</a> and a new
                or existing instance of the <a data-link-type="dfn" href="#dfn-permission-result-type" class="internalDFN" id="ref-for-dfn-permission-result-type-1">permission result type</a>, and
                updates the <a data-link-type="dfn" href="#dfn-permission-result-type" class="internalDFN" id="ref-for-dfn-permission-result-type-2">permission result type</a> instance with the query
                result. Used by <a data-link-type="idl" data-lt="Permissions" href="#dfn-permission" class="internalDFN" id="ref-for-dfn-permission-5"><code>Permissions</code></a>' <a data-link-type="idl" data-lt="query(permissionDesc)" href="#dom-permissions-query" class="internalDFN" id="ref-for-dom-permissions-query-1"><code>query</code></a><code>(<var>permissionDesc</var>)</code> method and
                the <a data-link-type="dfn" href="#dfn-permissionstatus-update-steps" class="internalDFN" id="ref-for-dfn-permissionstatus-update-steps-1"><code>PermissionStatus</code> update steps</a>. If unspecified, this defaults to the
                <a href="#dfn-default-permission-query-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-default-permission-query-algorithm-1">default permission query algorithm</a>.
              </p>
              <p>
                The <dfn id="dfn-default-permission-query-algorithm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">default permission query algorithm</dfn>, given a <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-3"><code>PermissionDescriptor</code></a>
                <var>permissionDesc</var> and a <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-3"><code>PermissionStatus</code></a> <var>status</var>, runs the following
                steps:
              </p>
              <ol class="algorithm">
                <li>Set <code><var>status</var>.state</code> to <var>permissionDesc</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-9">permission state</a>.
                </li>
              </ol>
            </dd>
            <dt>
              A <dfn data-dfn-for="powerful feature" class="export" data-export="" id="dfn-permission-revocation-algorithm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission revocation
              algorithm</dfn>:
            </dt>
            <dd>
              <p>
                Takes no arguments. Updates any other parts of the implementation that need to be
                kept in sync with changes in the results of <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-10">permission states</a> or <a data-link-type="dfn" href="#dfn-extra-permission-data" class="internalDFN" id="ref-for-dfn-extra-permission-data-3">extra permission data</a>, and then <a data-link-type="dfn" href="#dfn-react-to-the-user-revoking-permission" class="internalDFN" id="ref-for-dfn-react-to-the-user-revoking-permission-1">react to the user revoking permission</a>.
              </p>
              <p>
                If unspecified, this defaults to running <a data-link-type="dfn" href="#dfn-react-to-the-user-revoking-permission" class="internalDFN" id="ref-for-dfn-react-to-the-user-revoking-permission-2">react to the user revoking permission</a>.
              </p>
            </dd>
          </dl>
          <p>
            A <dfn class="export" data-export="" id="dfn-default-powerful-feature" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">default powerful feature</dfn> is a <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-10">powerful feature</a> with
            all of the above types and algorithms defaulted.
          </p>
        </section>
        <section id="aspects">
          <h4 id="x2-2-2-aspects"><bdi class="secno">2.2.2 </bdi>
            Aspects
          <a class="self-link" aria-label="§" href="#aspects"></a></h4>
          <p>
            Each <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-11">powerful feature</a> has one or more <dfn data-dfn-for="powerful feature" id="dfn-aspects" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">aspects</dfn> that websites can request permission to access. To
            describe these aspects, each feature defines a subtype of <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-4"><code>PermissionDescriptor</code></a> to
            be its <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-2">permission descriptor type</a>.
          </p>
          <aside class="example" id="example-4"><div class="marker">
    <a class="self-link" href="#example-4">Example<bdi> 4</bdi></a>
  </div>
            <p>
              The "<a data-link-type="idl" href="#dom-permissionname-midi" class="internalDFN" id="ref-for-dom-permissionname-midi-3"><code>midi</code></a>" <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-12">feature</a> has two <a data-link-type="dfn" href="#dfn-aspects" class="internalDFN" id="ref-for-dfn-aspects-1">aspects</a>:
              access to normal messages, and access to system exclusive messages. Thus, its
              <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-3">permission descriptor type</a> is:
            </p>
            <pre aria-busy="false"><code class="hljs css">dictionary MidiPermissionDescriptor : PermissionDescriptor {
  boolean sysex = false;
};</code></pre>
            <p>
              The "<a data-link-type="idl" href="#dom-permissionname-bluetooth" class="internalDFN" id="ref-for-dom-permissionname-bluetooth-1"><code>bluetooth</code></a>" feature lets sites request to access whatever
              Bluetooth devices are close to to the user's device. Thus, its <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-4">permission descriptor type</a> is:
            </p>
            <pre aria-busy="false"><code class="hljs xml">dictionary BluetoothPermissionDescriptor : PermissionDescriptor {
  DOMString deviceId;
  sequence<span class="hljs-tag">&lt;<span class="hljs-name">BluetoothLEScanFilterInit</span>&gt;</span> filters;
  sequence<span class="hljs-tag">&lt;<span class="hljs-name">BluetoothServiceUUID</span>&gt;</span> optionalServices = [];
  boolean acceptAllDevices = false;
};</code></pre>
            <p>
              General access to Bluetooth devices is represented by <code>{name: 'bluetooth'}</code>; access
              to a particular device is represented by <code>{name: 'bluetooth', deviceId: "id"}</code>; and
              access to a device with a particular service is represented by <code>{name: 'bluetooth',
              filters: [{services: ['service']}]}</code>
            </p>
          </aside>
        </section>
      </section>
      <section data-cite="permissions-policy" id="reading-the-current-permission-state">
        <h3 id="reading-current-states"><bdi class="secno">2.3 </bdi>
          Reading the current permission state
        <a class="self-link" aria-label="§" href="#reading-current-states"></a></h3>
        <p>
          A <var>descriptor</var>'s <dfn class="export" data-local-lt="state" data-export="" data-lt="permission state|state" data-plurals="permission states" id="dfn-permission-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permission state</dfn> for an
          optional <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a> <var>settings</var> is the result of the following
          algorithm, which returns one of "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-3"><code>granted</code></a>",
          "<a data-link-type="idl" href="#dom-permissionstate-prompt" class="internalDFN" id="ref-for-dom-permissionstate-prompt-1"><code>prompt</code></a>", or "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-3"><code>denied</code></a>":
        </p>
        <ol class="algorithm">
          <li>If <var>settings</var> wasn't passed, set it to the <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>.
          </li>
          <li>If <var>settings</var> is a <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context">non-secure context</a> and
          <code><var>descriptor</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-1"><code>name</code></a></code> isn't <a data-link-type="dfn" href="#dfn-allowed-in-non-secure-contexts" class="internalDFN" id="ref-for-dfn-allowed-in-non-secure-contexts-1">allowed in non-secure contexts</a>, then return "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-4"><code>denied</code></a>".
          </li>
          <li>If there exists a <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">policy-controlled feature</a> identified by
          <code><var>descriptor</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-2"><code>name</code></a></code> and <var>settings</var> has an
          <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window">associated <code>Document</code></a> named <var>document</var>, run the following step:
            <ol class="algorithm">
              <li>If <var>document</var> is not <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a> the feature identified by
              <code><var>descriptor</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-3"><code>name</code></a></code> return
              "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-5"><code>denied</code></a>".
              </li>
            </ol>
          </li>
          <li>If there was a previous invocation of this algorithm with the same <var>descriptor</var> and
          <var>settings</var>, returning <var>previousResult</var>, and the UA has not received <a href="#dfn-new-information-about-the-user-s-intent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-new-information-about-the-user-s-intent-2">new information
          about the user's intent</a> since that invocation, return <var>previousResult</var>.
          </li>
          <li>Return whichever of the following options most accurately reflects the user's intent
          for the calling algorithm, taking into account any <a data-link-type="dfn" href="#dfn-permission-state-constraints" class="internalDFN" id="ref-for-dfn-permission-state-constraints-1">permission state constraints</a> for <code><var>descriptor</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-4"><code>name</code></a></code>:
            <dl class="switch">
              <dt>
                succeed without prompting the user
              </dt>
              <dd>
                "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-4"><code>granted</code></a>"
              </dd>
              <dt>
                show the user a prompt to decide whether to succeed
              </dt>
              <dd>
                "<a data-link-type="idl" href="#dom-permissionstate-prompt" class="internalDFN" id="ref-for-dom-permissionstate-prompt-2"><code>prompt</code></a>"
              </dd>
              <dt>
                fail without prompting the user
              </dt>
              <dd>
                "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-6"><code>denied</code></a>"
              </dd>
            </dl>
          </li>
        </ol>
        <div class="issue" id="issue-current-entry-incumbent-or-relevant"><div role="heading" class="issue-title marker" id="h-issue" aria-level="4"><span>Issue 1</span></div><p class="">
          Safari is the only known UA that returns different results from this algorithm for
          different settings objects with the same origin. We should test which of the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#realms-settings-objects-global-objects">
          several possible settings objects</a> it uses.
        </p></div>
        <p>
          As a shorthand, a <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-3"><code>PermissionName</code></a> <var>name</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-11">permission state</a> is the
          <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-12">permission state</a> of a <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-5"><code>PermissionDescriptor</code></a> with its
          <a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-5"><code>name</code></a> member set to <var>name</var>.
        </p>
      </section>
      <section id="requesting-permission-to-use-a-powerful-feature">
        <h3 id="requesting-more-permission"><bdi class="secno">2.4 </bdi>
          Requesting permission to use a powerful feature
        <a class="self-link" aria-label="§" href="#requesting-more-permission"></a></h3>
        <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><p class="">
          Spec authors, please note that algorithms in this section can wait for user input; so
          they shouldn't be used from other algorithms running on the main thread.
        </p></div>
        <p>
          To <dfn data-lt="request permission to use|requesting permission to use" class="export" data-export="" id="dfn-request-permission-to-use" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">request permission to use</dfn> a <var>descriptor</var>, the UA must perform the
          following steps. This algorithm returns either "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-5"><code>granted</code></a>" or
          "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-7"><code>denied</code></a>".
        </p>
        <ol class="algorithm">
          <li>Let <var>current state</var> be the <var>descriptor</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-13">permission state</a>.
          </li>
          <li>If <var>current state</var> is not "<a data-link-type="idl" href="#dom-permissionstate-prompt" class="internalDFN" id="ref-for-dom-permissionstate-prompt-3"><code>prompt</code></a>", return <var>current
          state</var> and abort these steps.
          </li>
          <li>Ask the user's permission for the calling algorithm to use the <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-13">powerful
          feature</a> described by <var>descriptor</var>.
          </li>
          <li>If the user grants permission, return "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-6"><code>granted</code></a>"; otherwise return
          "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-8"><code>denied</code></a>". The user's interaction may provide <a href="#dfn-new-information-about-the-user-s-intent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-new-information-about-the-user-s-intent-3">new information about
          the user's intent</a> for this <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a> and other <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realms</a>
          with the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">same origin</a>.
            <div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span></div><p class="">
              This is intentionally vague about the details of the permission UI and how the UA
              infers user intent. UAs should be able to explore lots of UI within this framework.
            </p></div>
          </li>
        </ol>
        <p>
          As a shorthand, <a href="#dfn-request-permission-to-use" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-request-permission-to-use-1">requesting permission to use</a> a <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-4"><code>PermissionName</code></a> <var>name</var>, is the
          same as <a href="#dfn-request-permission-to-use" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-request-permission-to-use-2">requesting permission to use</a> a <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-6"><code>PermissionDescriptor</code></a> with its
          <a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-6"><code>name</code></a> member set to <var>name</var>.
        </p>
      </section>
      <section id="prompt-the-user-to-choose">
        <h3 id="x2-5-prompt-the-user-to-choose"><bdi class="secno">2.5 </bdi>
          Prompt the user to choose
        <a class="self-link" aria-label="§" href="#prompt-the-user-to-choose"></a></h3>
        <p>
          To <dfn data-lt="prompt the user to choose|prompting the user to choose" class="export" data-export="" id="dfn-prompt-the-user-to-choose" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">prompt the user to choose</dfn> one of several <var>options</var> associated with a
          <var>descriptor</var>, the UA must perform the following steps. This algorithm returns either
          "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-9"><code>denied</code></a>" or one of the options.
        </p>
        <ol class="algorithm">
          <li>If <var>descriptor</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-14">permission state</a> is "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-10"><code>denied</code></a>", return
          "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-11"><code>denied</code></a>" and abort these steps.
          </li>
          <li>If <var>descriptor</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-15">permission state</a> is "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-7"><code>granted</code></a>", the UA
          may return one of <var>options</var> and abort these steps. If the UA returns without prompting,
          then subsequent <a data-lt="prompt the user to choose" href="#dfn-prompt-the-user-to-choose" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-prompt-the-user-to-choose-1">prompts for the user to choose</a>
          from the same set of options with the same <var>descriptor</var> must return the same option,
          unless the UA receives <a href="#dfn-new-information-about-the-user-s-intent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-new-information-about-the-user-s-intent-4">new information about the user's intent</a>.
          </li>
          <li>Ask the user to choose one of the options or deny permission, and wait for them to
          choose. If the calling algorithm specified extra information to include in the prompt,
          include it.
          </li>
          <li>If the user chose an option, return it; otherwise return
          "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-12"><code>denied</code></a>". If the user's interaction indicates they intend this choice
          to apply to other realms, then treat this this as <a href="#dfn-new-information-about-the-user-s-intent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-new-information-about-the-user-s-intent-5">new information about the user's
          intent</a> for other <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realms</a> with the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">same origin</a>.
            <div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div><p class="">
              This is intentionally vague about the details of the permission UI and how the UA
              infers user intent. UAs should be able to explore lots of UI within this framework.
            </p></div>
          </li>
        </ol>
        <p>
          As a shorthand, <a href="#dfn-prompt-the-user-to-choose" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-prompt-the-user-to-choose-2">prompting the user to choose</a> from options associated with a
          <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-5"><code>PermissionName</code></a> <var>name</var>, is the same as <a href="#dfn-prompt-the-user-to-choose" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-prompt-the-user-to-choose-3">prompting the user to choose</a> from those
          options associated with a <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-7"><code>PermissionDescriptor</code></a> with its <a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-7"><code>name</code></a>
          member set to <var>name</var>.
        </p>
      </section>
      <section id="reacting-to-users-revoking-permission">
        <h3 id="reacting-to-revocation"><bdi class="secno">2.6 </bdi>
          Reacting to users revoking permission
        <a class="self-link" aria-label="§" href="#reacting-to-revocation"></a></h3>
        <p>
          When the UA learns that the user no longer intends to grant permission for a <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a> to use a <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-14">feature</a>, <dfn id="dfn-react-to-the-user-revoking-permission" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">react to the user revoking permission</dfn>
          by:
        </p>
        <ol class="algorithm">
          <li>
            <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the Realm's <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object">settings object</a>'s <a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a> to run that feature's <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-1">permission revocation algorithm</a>.
          </li>
        </ol>
      </section>
    </section>
    <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for permissions"><span>MDN</span><span> </span></summary>
    <a title="The Navigator.permissions read-only property returns a Permissions object that can be used to query and update permission status of APIs covered by the Permissions API." href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions">Navigator/permissions</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>43+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>43+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>46+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>46+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>Yes</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>Yes</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details><details>
    <summary aria-label="Expand MDN details for permissions"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The WorkerNavigator.permissions read-only property returns a Permissions object that can be used to query and update permission status of APIs covered by the Permissions API." href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerNavigator/permissions">WorkerNavigator/permissions</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>43+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>43+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox no">
      <td>Firefox</td>
      <td>No</td>
    </tr><tr class="firefox_android no">
      <td>Firefox Android</td>
      <td>No</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>30+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>30+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="extensions-to-the-navigator-and-workernavigator-interfaces">
      <h2 id="navigator-and-workernavigator-extension"><bdi class="secno">3. </bdi>
        Extensions to the <code>Navigator</code> and <code>WorkerNavigator</code> interfaces
      <a class="self-link" aria-label="§" href="#navigator-and-workernavigator-extension"></a></h2>
      <pre class="idl def" id="webidl-2112232240"><span class="idlHeader"><a class="self-link" href="#webidl-2112232240">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlAttribute" id="idl-def-navigator-permissions" data-title="permissions" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a href="#dfn-permission" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-6">Permissions</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-navigator-permissions" data-idl="attribute" data-title="permissions" data-dfn-for="Navigator" data-type="Permissions" data-lt="permissions" data-local-lt="Navigator.permissions" class="idlName" tabindex="0" aria-haspopup="dialog"><code>permissions</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-workernavigator-partial-1" data-title="WorkerNavigator">

[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="WorkerNavigator" class="idlID" data-dfn-for="WorkerNavigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {<span data-idl="" class="idlAttribute" id="idl-def-workernavigator-permissions" data-title="permissions" data-dfn-for="WorkerNavigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a href="#dfn-permission" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-7">Permissions</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-workernavigator-permissions" data-idl="attribute" data-title="permissions" data-dfn-for="WorkerNavigator" data-type="Permissions" data-lt="permissions" data-local-lt="WorkerNavigator.permissions" class="idlName" tabindex="0" aria-haspopup="dialog"><code>permissions</code></dfn>;</span>
};</span></code></pre>
    </section>
    <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for Permissions"><span>MDN</span><span> </span></summary>
    <a title="The Permissions interface of the Permissions API provides the core Permission API functionality, such as methods for querying and revoking permissions" href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions">Permissions</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>43+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>43+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>46+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>46+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>Yes</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>Yes</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section data-dfn-for="Permissions" id="permissions-interface-0">
      <h2 id="permissions-interface"><bdi class="secno">4. </bdi>
        <code>Permissions</code> interface
      <a class="self-link" aria-label="§" href="#permissions-interface"></a></h2>
      <pre class="idl def" id="webidl-402168873"><span class="idlHeader"><a class="self-link" href="#webidl-402168873">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-permissions" data-title="Permissions">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>,<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-permissions" data-idl="interface" data-title="Permissions" data-dfn-for="Permissions" class="idlID" tabindex="0" aria-haspopup="dialog"><code>Permissions</code></dfn> {<span data-idl="" class="idlMethod" id="idl-def-permissions-query-permissiondesc" data-title="query" data-dfn-for="Permissions"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-permissionstatus" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionstatus-4"><code>PermissionStatus</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-permissions-query" id="ref-for-dom-permissions-query-2"><code>query</code></a>(<span class="idlType"><a data-type="interface" href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlParamName">permissionDesc</span>);</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-permissiondescriptor" data-title="PermissionDescriptor">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-permissiondescriptor" data-idl="dictionary" data-title="PermissionDescriptor" data-dfn-for="PermissionDescriptor" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PermissionDescriptor</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-permissiondescriptor-name" data-title="name" data-dfn-for="PermissionDescriptor">
  required<span class="idlType"> <a href="#dom-permissionname" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionname-6"><code>PermissionName</code></a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-permissiondescriptor-name" data-idl="field" data-title="name" data-dfn-for="PermissionDescriptor" data-type="PermissionName" class="idlName" tabindex="0" aria-haspopup="dialog"><code>name</code></dfn>;</span>
};</span></code></pre>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for query"><span>MDN</span><span> </span></summary>
    <a title="The Permissions.query() method of the Permissions interface returns the state of a user permission on the global scope." href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query">Permissions/query</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>43+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>43+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>46+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>46+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>Yes</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>Yes</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="query-method-0">
        <h3 id="query-method"><bdi class="secno">4.1 </bdi>
          <code>query()</code> method
        <a class="self-link" aria-label="§" href="#query-method"></a></h3>
        <p>
          When the <dfn data-export="" data-dfn-type="method" id="dom-permissions-query" data-idl="operation" data-title="query()" data-dfn-for="Permissions" data-type="Promise" data-lt="query()|query(permissionDesc)" data-local-lt="Permissions.query|Permissions.query()|query" tabindex="0" aria-haspopup="dialog"><code>query()</code></dfn> method is invoked, the <a data-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a> <em class="rfc2119">MUST</em> run the
          following <dfn class="export" data-export="" id="dfn-query-a-permission" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">query a permission</dfn> algorithm, passing the parameter
          <var>permissionDesc</var>:
        </p>
        <ol class="algorithm">
          <li>Let <var>rootDesc</var> be the object <var>permissionDesc</var> refers to, <a data-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">converted to an IDL
          value</a> of type <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-8"><code>PermissionDescriptor</code></a>. If this throws an exception, return <a data-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with">a
          promise rejected with</a> that exception and abort these steps.
          </li>
          <li>Let <var>typedDescriptor</var> be the object <var>permissionDesc</var> refers to, <a data-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">converted to an
          IDL value</a> of <code><var>rootDesc</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-8"><code>name</code></a></code>'s <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-5">permission descriptor type</a>. If this throws an exception, return <a data-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with">a promise
          rejected with</a> that exception and abort these steps.
          </li>
          <li>Let <var>promise</var> be a newly-created <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><code>Promise</code></a>.
          </li>
          <li>Return <var>promise</var> and continue the following steps asynchronously.
          </li>
          <li>Run the steps to <a href="#dfn-create-a-permissionstatus" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-create-a-permissionstatus-1">create a <code>PermissionStatus</code></a> for <var>typedDescriptor</var>, and let
          <var>status</var> be the result.
          </li>
          <li>Run
          <code><var>status</var>.<a data-lt="[[query]]" href="#dfn-query" class="internalDFN" data-link-type="idl" id="ref-for-dfn-query-1"><code>[[query]]</code></a>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-9"><code>name</code></a></code>'s
          <a data-link-type="dfn" href="#dfn-permission-query-algorithm" class="internalDFN" id="ref-for-dfn-permission-query-algorithm-1">permission query algorithm</a>, passing
          <code><var>status</var>.<a data-lt="[[query]]" href="#dfn-query" class="internalDFN" data-link-type="idl" id="ref-for-dfn-query-2"><code>[[query]]</code></a></code> and <var>status</var>.
          </li>
          <li>Resolve <var>promise</var> with <var>status</var>.
          </li>
        </ol>
      </section>
    </section>
    <section data-dfn-for="PermissionStatus" id="permissionstatus-interface-0">
      <h2 id="permissionstatus-interface"><bdi class="secno">5. </bdi>
        <code>PermissionStatus</code> interface
      <a class="self-link" aria-label="§" href="#permissionstatus-interface"></a></h2>
      <pre class="idl def" id="webidl-717592932"><span class="idlHeader"><a class="self-link" href="#webidl-717592932">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-permissionstatus" data-title="PermissionStatus">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>,<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-permissionstatus" data-idl="interface" data-title="PermissionStatus" data-dfn-for="PermissionStatus" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PermissionStatus</code></dfn> : <span class="idlSuperclass"><a data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-permissionstatus-state" data-title="state" data-dfn-for="PermissionStatus">
  readonly attribute<span class="idlType"> <a href="#dom-permissionstate" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionstate-2"><code>PermissionState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state-1"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-permissionstatus-name" data-title="name" data-dfn-for="PermissionStatus">
  readonly attribute<span class="idlType"> <a href="#dom-permissionname" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionname-7"><code>PermissionName</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-name" id="ref-for-dom-permissionstatus-name-1"><code>name</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-permissionstatus-onchange" data-title="onchange" data-dfn-for="PermissionStatus">
  attribute<span class="idlType"> <a data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-onchange" id="ref-for-dom-permissionstatus-onchange-1"><code>onchange</code></a>;</span>
};</span><span data-idl="" class="idlEnum" id="idl-def-permissionstate" data-title="PermissionState">

enum <dfn data-export="" data-dfn-type="enum" id="dom-permissionstate" data-idl="enum" data-title="PermissionState" data-dfn-for="PermissionState" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PermissionState</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-8"><code>granted</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-13"><code>denied</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-4"><code>prompt</code></a>"</span>,
};</span></code></pre>
      <p>
        <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-5"><code>PermissionStatus</code></a> instances are created with a <dfn data-idl="" data-dfn-for="PermissionStatus" data-noexport="" data-dfn-type="attribute" id="dfn-query" tabindex="0" aria-haspopup="dialog">[[query]]</dfn> internal slot,
        which is an instance of a feature's <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-6">permission descriptor type</a>.
      </p>
      <p data-dfn-for="PermissionState">
        When using the API, the "<dfn data-export="" data-dfn-type="enum-value" id="dom-permissionstate-granted" data-idl="enum-value" data-title="granted" data-dfn-for="PermissionState" tabindex="0" aria-haspopup="dialog"><code>granted</code></dfn>", "<dfn data-export="" data-dfn-type="enum-value" id="dom-permissionstate-denied" data-idl="enum-value" data-title="denied" data-dfn-for="PermissionState" tabindex="0" aria-haspopup="dialog"><code>denied</code></dfn>", and "<dfn data-export="" data-dfn-type="enum-value" id="dom-permissionstate-prompt" data-idl="enum-value" data-title="prompt" data-dfn-for="PermissionState" tabindex="0" aria-haspopup="dialog"><code>prompt</code></dfn>"
        enum values represent the concepts of <a data-link-type="dfn" href="#dfn-granted" class="internalDFN" id="ref-for-dfn-granted-4">granted</a>, <a data-link-type="dfn" href="#dfn-denied" class="internalDFN" id="ref-for-dfn-denied-2">denied</a>, and
        <a data-link-type="dfn" href="#dfn-prompt" class="internalDFN" id="ref-for-dfn-prompt-1">prompt</a> respectively.
      </p>
      <section id="creating-instances">
        <h3 id="x5-1-creating-instances"><bdi class="secno">5.1 </bdi>
          Creating instances
        <a class="self-link" aria-label="§" href="#creating-instances"></a></h3>
        <p>
          To <dfn id="dfn-create-a-permissionstatus" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">create a <code>PermissionStatus</code></dfn> for a given <a data-link-type="idl" data-lt="PermissionDescriptor" href="#dom-permissiondescriptor" class="internalDFN" id="ref-for-dom-permissiondescriptor-9"><code>PermissionDescriptor</code></a>
          <var>permissionDesc</var>, return a new instance of the <a data-link-type="dfn" href="#dfn-permission-result-type" class="internalDFN" id="ref-for-dfn-permission-result-type-3">permission result type</a> for the feature named by <var>permissionDesc</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-10"><code>name</code></a>, with the
          <a data-lt="[[query]]" href="#dfn-query" class="internalDFN" data-link-type="idl" id="ref-for-dfn-query-3"><code>[[query]]</code></a> internal slot initialized to <var>permissionDesc</var>, and
          <a data-link-type="idl" href="#dom-permissionstatus-name" class="internalDFN" id="ref-for-dom-permissionstatus-name-2"><code>name</code></a> initialized to <var>permissionDesc</var>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-11"><code>name</code></a>.
        </p>
      </section>
      <section id="name-attribute">
        <h3 id="x5-2-name-attribute"><bdi class="secno">5.2 </bdi>
          <code>name</code> attribute
        <a class="self-link" aria-label="§" href="#name-attribute"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="attribute" id="dom-permissionstatus-name" data-idl="attribute" data-title="name" data-dfn-for="PermissionStatus" data-type="PermissionName" data-lt="name" data-local-lt="PermissionStatus.name" tabindex="0" aria-haspopup="dialog"><code>name</code></dfn> attribute returns the value it was initialized to.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for state"><span>MDN</span><span> </span></summary>
    <a title="The state read-only property of the PermissionStatus interface returns the state of a requested permission. This property returns one of 'granted', 'denied', or 'prompt'." href="https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/state">PermissionStatus/state</a>
    
    <table>
    <tr class="chrome unknown">
      <td>Chrome</td>
      <td>?</td>
    </tr><tr class="chrome_android unknown">
      <td>Chrome Android</td>
      <td>?</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>46+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>46+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>Yes</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>Yes</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="state-attribute">
        <h3 id="x5-3-state-attribute"><bdi class="secno">5.3 </bdi>
          <code>state</code> attribute
        <a class="self-link" aria-label="§" href="#state-attribute"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="attribute" id="dom-permissionstatus-state" data-idl="attribute" data-title="state" data-dfn-for="PermissionStatus" data-type="PermissionState" data-lt="state" data-local-lt="PermissionStatus.state" tabindex="0" aria-haspopup="dialog"><code>state</code></dfn> attribute returns the latest value that was set on the current
          instance.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for onchange"><span>MDN</span><span> </span></summary>
    <a title="The onchange event handler of the PermissionStatus interface is called whenever the PermissionStatus.state property changes." href="https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/onchange">PermissionStatus/onchange</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>43+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>43+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>46+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>46+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>Yes</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>Yes</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>4.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="onchange-attribute">
        <h3 id="x5-4-onchange-attribute"><bdi class="secno">5.4 </bdi>
          <code>onchange</code> attribute
        <a class="self-link" aria-label="§" href="#onchange-attribute"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="attribute" id="dom-permissionstatus-onchange" data-idl="attribute" data-title="onchange" data-dfn-for="PermissionStatus" data-type="EventHandler" data-lt="onchange" data-local-lt="PermissionStatus.onchange" tabindex="0" aria-haspopup="dialog"><code>onchange</code></dfn> attribute is an <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a> whose corresponding <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event
          handler event type</a> is <code>change</code>.
        </p>
        <p id="PermissionStatus-update">
          Whenever the <a data-link-type="dfn" data-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a> is aware that the state of a <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-6"><code>PermissionStatus</code></a> instance
          <var>status</var> has changed, it asynchronously runs the <dfn id="dfn-permissionstatus-update-steps" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>PermissionStatus</code> update
          steps</dfn>:
        </p>
        <ol class="algorithm">
          <li>Run
          <code><var>status</var>.<a data-lt="[[query]]" href="#dfn-query" class="internalDFN" data-link-type="idl" id="ref-for-dfn-query-4"><code>[[query]]</code></a>.<a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-12"><code>name</code></a></code>'s
          <a data-link-type="dfn" href="#dfn-permission-query-algorithm" class="internalDFN" id="ref-for-dfn-permission-query-algorithm-2">permission query algorithm</a>, passing
          <code><var>status</var>.<a data-lt="[[query]]" href="#dfn-query" class="internalDFN" data-link-type="idl" id="ref-for-dfn-query-5"><code>[[query]]</code></a></code> and <var>status</var>.
          </li>
          <li>
            <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <dfn class="export" data-export="" id="dfn-permissions-task-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">permissions task source</dfn> to <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">fire
            an event</a> named <code>change</code> at <var>status</var>.
          </li>
        </ol>
      </section>
      <section id="garbage-collection">
        <h3 id="permissionstatus-gc"><bdi class="secno">5.5 </bdi>
          Garbage collection
        <a class="self-link" aria-label="§" href="#permissionstatus-gc"></a></h3>
        <p>
          While an <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-7"><code>PermissionStatus</code></a> object has one or more event listeners registered for
          "change", there must be a strong reference from the <a data-link-type="idl" data-lt="Window" data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window"><code>Window</code></a> or <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a>
          object that the <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-8"><code>PermissionStatus</code></a> object's constructor was invoked from to the
          <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-9"><code>PermissionStatus</code></a> object itself.
        </p>
        <p>
          While there is a task queued by an <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-10"><code>PermissionStatus</code></a> object on the <a data-link-type="dfn" href="#dfn-permissions-task-source" class="internalDFN" id="ref-for-dfn-permissions-task-source-1">permissions task source</a>, there must be a strong reference from the <a data-link-type="idl" data-lt="Window" data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window"><code>Window</code></a> or <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a>
          object that the <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-11"><code>PermissionStatus</code></a> object's constructor was invoked from to that
          <a data-link-type="idl" data-lt="PermissionStatus" href="#dom-permissionstatus" class="internalDFN" id="ref-for-dom-permissionstatus-12"><code>PermissionStatus</code></a> object.
        </p>
      </section>
    </section>
    <section data-dfn-for="PermissionName" id="powerful-features-registry">
      <h2 id="x6-powerful-features-registry"><bdi class="secno">6. </bdi>
        Powerful features registry
      <a class="self-link" aria-label="§" href="#powerful-features-registry"></a></h2>
      <pre class="idl def" id="webidl-1342630210"><span class="idlHeader"><a class="self-link" href="#webidl-1342630210">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-permissionname" data-title="PermissionName">enum <dfn data-export="" data-dfn-type="enum" id="dom-permissionname" data-idl="enum" data-title="PermissionName" data-dfn-for="PermissionName" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PermissionName</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-accelerometer" id="ref-for-dom-permissionname-accelerometer-1"><code>accelerometer</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-ambient-light-sensor" id="ref-for-dom-permissionname-ambient-light-sensor-1"><code>ambient-light-sensor</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-background-fetch" id="ref-for-dom-permissionname-background-fetch-1"><code>background-fetch</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-background-sync" id="ref-for-dom-permissionname-background-sync-1"><code>background-sync</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-2"><code>bluetooth</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-1"><code>camera</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-display-capture" id="ref-for-dom-permissionname-display-capture-1"><code>display-capture</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-2"><code>geolocation</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-gyroscope" id="ref-for-dom-permissionname-gyroscope-1"><code>gyroscope</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-magnetometer" id="ref-for-dom-permissionname-magnetometer-1"><code>magnetometer</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone-1"><code>microphone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-4"><code>midi</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-nfc" id="ref-for-dom-permissionname-nfc-1"><code>nfc</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-2"><code>notifications</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-persistent-storage" id="ref-for-dom-permissionname-persistent-storage-1"><code>persistent-storage</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-push" id="ref-for-dom-permissionname-push-1"><code>push</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-screen-wake-lock" id="ref-for-dom-permissionname-screen-wake-lock-1"><code>screen-wake-lock</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-speaker-selection" id="ref-for-dom-permissionname-speaker-selection-1"><code>speaker-selection</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-xr-spatial-tracking" id="ref-for-dom-permissionname-xr-spatial-tracking-1"><code>xr-spatial-tracking</code></a>"</span>,
};</span></code></pre>
      <p>
        Each enumeration value in the <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-8"><code>PermissionName</code></a> enum identifies a <a href="#dfn-powerful-feature" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-powerful-feature-15">powerful feature</a>.
      </p>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for geolocation"><span>MDN</span><span> </span></summary>
    <a title="The HTTP Feature-Policy header geolocation directive controls whether the current document is allowed to use the Geolocation Interface. When this policy is enabled, calls to getCurrentPosition() and watchPosition() will cause those functions' callbacks to be invoked with a GeolocationPositionError code of PERMISSION_DENIED." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/geolocation">Headers/Feature-Policy/geolocation</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>60+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>60+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>65+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>65+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>47+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>44+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>8.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>60+</td>
    </tr>
  </table>
  </details></aside><section id="geolocation-0">
        <h3 id="geolocation"><bdi class="secno">6.1 </bdi>
          Geolocation
        <a class="self-link" aria-label="§" href="#geolocation"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-geolocation" data-idl="enum-value" data-title="geolocation" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>geolocation</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/geolocation/">Geolocation API</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-16">powerful feature</a>. It is a <a data-link-type="dfn" href="#dfn-default-powerful-feature" class="internalDFN" id="ref-for-dfn-default-powerful-feature-1">default powerful feature</a>.
        </p>
      </section>
      <section id="notifications-0">
        <h3 id="notifications"><bdi class="secno">6.2 </bdi>
          Notifications
        <a class="self-link" aria-label="§" href="#notifications"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-notifications" data-idl="enum-value" data-title="notifications" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>notifications</code></dfn> enum value identifies the <cite><a href="https://notifications.spec.whatwg.org/">Notifications API Standard</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-17">powerful feature</a>. It is a <a data-link-type="dfn" href="#dfn-default-powerful-feature" class="internalDFN" id="ref-for-dfn-default-powerful-feature-2">default powerful feature</a> and is <a data-link-type="dfn" href="#dfn-allowed-in-non-secure-contexts" class="internalDFN" id="ref-for-dfn-allowed-in-non-secure-contexts-2">allowed in non-secure contexts</a>.
        </p>
      </section>
      <section id="push-0">
        <h3 id="push"><bdi class="secno">6.3 </bdi>
          Push
        <a class="self-link" aria-label="§" href="#push"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-push" data-idl="enum-value" data-title="push" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>push</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/push-api/">Push API</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-18">powerful feature</a>.
        </p>
        <dl>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-7">permission descriptor type</a>
          </dt>
          <dd>
            <pre class="idl def" id="webidl-1117437819"><span class="idlHeader"><a class="self-link" href="#webidl-1117437819">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushpermissiondescriptor" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-pushpermissiondescriptor" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="PushPermissionDescriptor" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-10"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-pushpermissiondescriptor-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pushpermissiondescriptor-uservisibleonly" data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor" data-type="boolean" class="idlName" tabindex="0" aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> = false;</span>
};</span></code></pre>
            <p>
              <code>{name: "push", userVisibleOnly: false}</code> is <a data-link-type="dfn" href="#dfn-stronger-than" class="internalDFN" id="ref-for-dfn-stronger-than-2">stronger than</a>
              <code>{name: "push", userVisibleOnly: true}</code>.
            </p>
          </dd>
        </dl>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for midi"><span>MDN</span><span> </span></summary>
    <a title="The HTTP Feature-Policy header midi directive controls whether the current document is allowed to use the Web MIDI API. When this policy is enabled, the Promise returned by Navigator.requestMIDIAccess() will reject with a DOMException." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/midi">Headers/Feature-Policy/midi</a>
    
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>60+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>60+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>65+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>65+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>47+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>44+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>8.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>60+</td>
    </tr>
  </table>
  </details></aside><section id="midi-0">
        <h3 id="midi"><bdi class="secno">6.4 </bdi>
          Midi
        <a class="self-link" aria-label="§" href="#midi"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-midi" data-idl="enum-value" data-title="midi" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>midi</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/webmidi/">Web MIDI API</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-19">powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-2"><div role="heading" class="issue-title marker" id="h-issue-0" aria-level="4"><span>Issue 2</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-20">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-1">at risk</a>.
        </p></div>
        <dl>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-8">permission descriptor type</a>
          </dt>
          <dd>
            <pre class="idl def" id="webidl-1632041439"><span class="idlHeader"><a class="self-link" href="#webidl-1632041439">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-midipermissiondescriptor" data-title="MidiPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-midipermissiondescriptor" data-idl="dictionary" data-title="MidiPermissionDescriptor" data-dfn-for="MidiPermissionDescriptor" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MidiPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-11"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-midipermissiondescriptor-sysex" data-title="sysex" data-dfn-for="MidiPermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-midipermissiondescriptor-sysex" data-idl="field" data-title="sysex" data-dfn-for="MidiPermissionDescriptor" data-type="boolean" class="idlName" tabindex="0" aria-haspopup="dialog"><code>sysex</code></dfn> = false;</span>
};</span></code></pre>
            <p>
              <code>{name: "midi", sysex: true}</code> is <a data-link-type="dfn" href="#dfn-stronger-than" class="internalDFN" id="ref-for-dfn-stronger-than-3">stronger than</a> <code>{name:
              "midi", sysex: false}</code>.
            </p>
          </dd>
        </dl>
      </section>
      <section id="screen-wake-lock-0">
        <h3 id="screen-wake-lock"><bdi class="secno">6.5 </bdi>
          Screen wake lock
        <a class="self-link" aria-label="§" href="#screen-wake-lock"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-screen-wake-lock" data-idl="enum-value" data-title="screen-wake-lock" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>screen-wake-lock</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/screen-wake-lock/">Screen Wake Lock API</a></cite> API
          <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-21">powerful feature</a>. It is a <a data-link-type="dfn" href="#dfn-default-powerful-feature" class="internalDFN" id="ref-for-dfn-default-powerful-feature-3">default powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-3"><div role="heading" class="issue-title marker" id="h-issue-1" aria-level="4"><span>Issue 3</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-22">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-2">at risk</a>.
        </p></div>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for camera"><span>MDN</span><span title="This feature is in all major engines.">✅</span></summary>
    <a title="The HTTP Feature-Policy header camera directive controls whether the current document is allowed to use video input devices. When this policy is enabled, the Promise returned by MediaDevices.getUserMedia() will reject with a NotAllowedError DOMException." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/camera">Headers/Feature-Policy/camera</a>
    <p class="engines-all">This feature is in all major engines.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>60+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>60+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>65+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>65+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>48+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>45+</td>
    </tr><tr class="safari yes">
      <td>Safari</td>
      <td>11.1+</td>
    </tr><tr class="safari_ios yes">
      <td>Safari iOS</td>
      <td>11.3+</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>8.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>60+</td>
    </tr>
  </table>
  </details><details>
    <summary aria-label="Expand MDN details for microphone"><span>MDN</span><span title="This feature is in all major engines.">✅</span></summary>
    <a title="The HTTP Feature-Policy header microphone directive controls whether the current document is allowed to use audio input devices. When this policy is enabled, the Promise returned by MediaDevices.getUserMedia() will reject with a NotAllowedError." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/microphone">Headers/Feature-Policy/microphone</a>
    <p class="engines-all">This feature is in all major engines.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>60+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>60+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>65+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>65+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>48+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>45+</td>
    </tr><tr class="safari yes">
      <td>Safari</td>
      <td>11.1+</td>
    </tr><tr class="safari_ios yes">
      <td>Safari iOS</td>
      <td>11.3+</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>8.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>60+</td>
    </tr>
  </table>
  </details></aside><section data-cite="WebIDL mediacapture-streams" id="media-devices-0">
        <h3 id="media-devices"><bdi class="secno">6.6 </bdi>
          Media Devices
        <a class="self-link" aria-label="§" href="#media-devices"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-camera" data-idl="enum-value" data-title="camera" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>camera</code></dfn>, <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-microphone" data-idl="enum-value" data-title="microphone" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>microphone</code></dfn> , and <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-speaker-selection" data-idl="enum-value" data-title="speaker-selection" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>speaker-selection</code></dfn>
          permissions are associated with permission to use media devices as specified in
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-getusermedia" title="Media Capture and Streams">GETUSERMEDIA</a></cite>] and [<cite><a class="bibref" data-link-type="biblio" href="#bib-audio-output" title="Audio Output Devices API">audio-output</a></cite>].
        </p>
        <div class="issue" id="issue-container-number-4"><div role="heading" class="issue-title marker" id="h-issue-2" aria-level="4"><span>Issue 4</span></div><p class="">
          These permissions only have a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, are <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-3">at risk</a>.
        </p></div>
        <dl>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-descriptor-type" class="internalDFN" id="ref-for-dfn-permission-descriptor-type-9">permission descriptor type</a>
          </dt>
          <dd>
            <pre class="idl def" id="webidl-1580257238"><span class="idlHeader"><a class="self-link" href="#webidl-1580257238">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-devicepermissiondescriptor" data-title="DevicePermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-devicepermissiondescriptor" data-idl="dictionary" data-title="DevicePermissionDescriptor" data-dfn-for="DevicePermissionDescriptor" class="idlID" tabindex="0" aria-haspopup="dialog"><code>DevicePermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-12"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-devicepermissiondescriptor-deviceid" data-title="deviceId" data-dfn-for="DevicePermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-devicepermissiondescriptor-deviceid" data-idl="field" data-title="deviceId" data-dfn-for="DevicePermissionDescriptor" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>deviceId</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-cameradevicepermissiondescriptor" data-title="CameraDevicePermissionDescriptor">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-cameradevicepermissiondescriptor" data-idl="dictionary" data-title="CameraDevicePermissionDescriptor" data-dfn-for="CameraDevicePermissionDescriptor" class="idlID" tabindex="0" aria-haspopup="dialog"><code>CameraDevicePermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-devicepermissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-devicepermissiondescriptor-1"><code>DevicePermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-cameradevicepermissiondescriptor-pantiltzoom" data-title="panTiltZoom" data-dfn-for="CameraDevicePermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-cameradevicepermissiondescriptor-pantiltzoom" data-idl="field" data-title="panTiltZoom" data-dfn-for="CameraDevicePermissionDescriptor" data-type="boolean" class="idlName" tabindex="0" aria-haspopup="dialog"><code>panTiltZoom</code></dfn> = false;</span>
};</span></code></pre>
            <p>
              A permission covers access to the device given in the associated descriptor.
            </p>
            <p>
              If the descriptor does not have a <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-1"><code>deviceId</code></a>, its
              semantic is that it queries for access to all devices of that class. Thus, if a query
              for the "<a data-link-type="idl" href="#dom-permissionname-camera" class="internalDFN" id="ref-for-dom-permissionname-camera-2"><code>camera</code></a>" permission with no
              <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-2"><code>deviceId</code></a> returns "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-9"><code>granted</code></a>", the
              client knows that there will never be a permission prompt for a camera, and if
              "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-14"><code>denied</code></a>" is returned, it knows that no getUserMedia request for a
              camera will succeed.
            </p>
            <p>
              If a permission state is present for access to some, but not all, cameras, a query
              without the <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-3"><code>deviceId</code></a> will return
              "<a data-link-type="idl" href="#dom-permissionstate-prompt" class="internalDFN" id="ref-for-dom-permissionstate-prompt-5"><code>prompt</code></a>".
            </p>
            <p>
              <code>{name: "camera", panTiltZoom: true}</code> is <a data-link-type="dfn" href="#dfn-stronger-than" class="internalDFN" id="ref-for-dfn-stronger-than-4">stronger than</a>
              <code>{name: "camera", panTiltZoom: false}</code>.
            </p>
            <p>
              Note that a "granted" permission is no guarantee that getUserMedia will succeed. It
              only guarantees that the user will not be prompted for permission. There are many
              other things (such as constraints or the camera being in use) that can cause
              getUserMedia to fail.
            </p>
          </dd>
          <dt>
            <a data-link-type="dfn" href="#dfn-extra-permission-data-type" class="internalDFN" id="ref-for-dfn-extra-permission-data-type-3">extra permission data type</a>
          </dt>
          <dd>
            A list of <a data-link-type="idl" data-type="attribute" href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadeviceinfo-deviceid"><code>deviceId</code></a> values for the devices the user has made a
            non-default decision on access to.
          </dd>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-query-algorithm" class="internalDFN" id="ref-for-dfn-permission-query-algorithm-3">permission query algorithm</a>
          </dt>
          <dd>
            The permission query algorithm runs the following steps:
            <ol class="algorithm">
              <li>If <var>permissionDesc</var>.deviceId exists in the <a data-link-type="dfn" href="#dfn-extra-permission-data" class="internalDFN" id="ref-for-dfn-extra-permission-data-4">extra permission data</a>, set <code><var>status</var>.state</code> to <var>permissionDesc</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-16">permission state</a>
              and terminate these steps.
              </li>
              <li>Let <var>global</var> be a copy of <var>permissionDesc</var> with the
              <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-4"><code>deviceId</code></a> member removed.
              </li>
              <li>Set <code><var>status</var>.state</code> to <var>global</var>'s <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-17">permission state</a>.
              </li>
            </ol>
          </dd>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-2">permission revocation algorithm</a>
          </dt>
          <dd>
            This is the result of calling the <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/mediacapture-streams/#dfn-device-permission-revocation-algorithm">device permission revocation algorithm</a> passing
            <a data-link-type="idl" href="#dom-permissiondescriptor-name" class="internalDFN" id="ref-for-dom-permissiondescriptor-name-13"><code>name</code></a> and <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-5"><code>deviceId</code></a> as arguments.
            If the descriptor does not have a <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-6"><code>deviceId</code></a>, then
            <code>undefined</code> is passed in place of <a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" class="internalDFN" id="ref-for-dom-devicepermissiondescriptor-deviceid-7"><code>deviceId</code></a>.
          </dd>
        </dl>
      </section>
      <section id="background-fetch-0">
        <h3 id="background-fetch"><bdi class="secno">6.7 </bdi>
          Background Fetch
        <a class="self-link" aria-label="§" href="#background-fetch"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-background-fetch" data-idl="enum-value" data-title="background-fetch" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>background-fetch</code></dfn> enum value identifies the <cite><a href="https://wicg.github.io/background-fetch/">Background Fetch</a></cite>
          <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-23">powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-5"><div role="heading" class="issue-title marker" id="h-issue-3" aria-level="4"><span>Issue 5</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-24">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-4">at risk</a>.
        </p></div>
      </section>
      <section id="background-sync-0">
        <h3 id="background-sync"><bdi class="secno">6.8 </bdi>
          Background Sync
        <a class="self-link" aria-label="§" href="#background-sync"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-background-sync" data-idl="enum-value" data-title="background-sync" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>background-sync</code></dfn> enum value identifies the <cite><a href="https://wicg.github.io/background-sync/spec/">Web Background Synchronization</a></cite>
          <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-25">powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-6"><div role="heading" class="issue-title marker" id="h-issue-4" aria-level="4"><span>Issue 6</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-26">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-5">at risk</a>.
        </p></div>
      </section>
      <section id="bluetooth-0">
        <h3 id="bluetooth"><bdi class="secno">6.9 </bdi>
          Bluetooth
        <a class="self-link" aria-label="§" href="#bluetooth"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-bluetooth" data-idl="enum-value" data-title="bluetooth" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>bluetooth</code></dfn> enum value identifies the <cite><a href="https://webbluetoothcg.github.io/web-bluetooth/">Web Bluetooth</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-27">powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-7"><div role="heading" class="issue-title marker" id="h-issue-5" aria-level="4"><span>Issue 7</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-28">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-6">at risk</a>.
        </p></div>
      </section>
      <section data-cite="storage" id="persistent-storage-0">
        <h3 id="persistent-storage"><bdi class="secno">6.10 </bdi>
          Persistent Storage
        <a class="self-link" aria-label="§" href="#persistent-storage"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-persistent-storage" data-idl="enum-value" data-title="persistent-storage" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>persistent-storage</code></dfn> is enum value identifies the <cite><a href="https://storage.spec.whatwg.org/">Storage Standard</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-29">powerful feature</a>.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for ambient-light-sensor"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The HTTP Feature-Policy header ambient-light-sensor directive controls whether the current document is allowed to gather information about the amount of light in the environment around the device through the AmbientLightSensor interface." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/ambient-light-sensor">Headers/Feature-Policy/ambient-light-sensor</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>67+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>67+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox no">
      <td>Firefox</td>
      <td>No</td>
    </tr><tr class="firefox_android no">
      <td>Firefox Android</td>
      <td>No</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>54+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>48+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>9.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>67+</td>
    </tr>
  </table>
  </details></aside><section data-cite="ambient-light" id="ambient-light-sensor-0">
        <h3 id="ambient-light-sensor"><bdi class="secno">6.11 </bdi>
          Ambient Light Sensor
        <a class="self-link" aria-label="§" href="#ambient-light-sensor"></a></h3>
        <div class="issue" id="issue-container-number-8"><div role="heading" class="issue-title marker" id="h-issue-6" aria-level="4"><span>Issue 8</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-30">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-7">at risk</a>.
        </p></div>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-ambient-light-sensor" data-idl="enum-value" data-title="ambient-light-sensor" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>ambient-light-sensor</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/ambient-light/">Ambient Light Sensor</a></cite> API
          <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-31">powerful feature</a>.
        </p>
        <p data-cite="generic-sensor">
          Its <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-3">permission revocation algorithm</a> is the result of calling
          <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/generic-sensor/#generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a> passing it
          "<a data-link-type="idl" href="#dom-permissionname-ambient-light-sensor" class="internalDFN" id="ref-for-dom-permissionname-ambient-light-sensor-2"><code>ambient-light-sensor</code></a>" as argument.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for accelerometer"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The HTTP Feature-Policy header accelerometer directive controls whether the current document is allowed to gather information about the acceleration of the device through the Accelerometer interface." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/accelerometer">Headers/Feature-Policy/accelerometer</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>67+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>67+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox no">
      <td>Firefox</td>
      <td>No</td>
    </tr><tr class="firefox_android no">
      <td>Firefox Android</td>
      <td>No</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>54+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>48+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>9.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>67+</td>
    </tr>
  </table>
  </details></aside><section id="accelerometer-0">
        <h3 id="accelerometer"><bdi class="secno">6.12 </bdi>
          Accelerometer
        <a class="self-link" aria-label="§" href="#accelerometer"></a></h3>
        <div class="issue" id="issue-container-number-9"><div role="heading" class="issue-title marker" id="h-issue-7" aria-level="4"><span>Issue 9</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-32">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-8">at risk</a>.
        </p></div>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-accelerometer" data-idl="enum-value" data-title="accelerometer" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>accelerometer</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/accelerometer/">Accelerometer</a></cite> API <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-33">powerful feature</a>.
        </p>
        <p data-cite="generic-sensor">
          Its <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-4">permission revocation algorithm</a> is the result of calling
          <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/generic-sensor/#generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a> passing it
          "<a data-link-type="idl" href="#dom-permissionname-accelerometer" class="internalDFN" id="ref-for-dom-permissionname-accelerometer-2"><code>accelerometer</code></a>" as argument.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for gyroscope"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The HTTP Feature-Policy header gyroscope directive controls whether the current document is allowed to gather information about the orientation of the device through the Gyroscope interface." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/gyroscope">Headers/Feature-Policy/gyroscope</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>67+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>67+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox no">
      <td>Firefox</td>
      <td>No</td>
    </tr><tr class="firefox_android no">
      <td>Firefox Android</td>
      <td>No</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>54+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>48+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>9.0+</td>
    </tr><tr class="webview_android yes">
      <td>WebView Android</td>
      <td>67+</td>
    </tr>
  </table>
  </details></aside><section id="gyroscope-0">
        <h3 id="gyroscope"><bdi class="secno">6.13 </bdi>
          Gyroscope
        <a class="self-link" aria-label="§" href="#gyroscope"></a></h3>
        <div class="issue" id="issue-container-number-10"><div role="heading" class="issue-title marker" id="h-issue-8" aria-level="4"><span>Issue 10</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-34">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-9">at risk</a>.
        </p></div>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-gyroscope" data-idl="enum-value" data-title="gyroscope" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>gyroscope</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/gyroscope/">Gyroscope</a></cite> API <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-35">powerful feature</a>.
        </p>
        <p data-cite="generic-sensor">
          Its <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-5">permission revocation algorithm</a> is the result of calling
          <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/generic-sensor/#generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a> passing it
          "<a data-link-type="idl" href="#dom-permissionname-gyroscope" class="internalDFN" id="ref-for-dom-permissionname-gyroscope-2"><code>gyroscope</code></a>" as argument.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for magnetometer"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The HTTP Feature-Policy header magnetometer directive controls whether the current document is allowed to gather information about the orientation of the device through the Magnetometer interface." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/magnetometer">Headers/Feature-Policy/magnetometer</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome yes">
      <td>Chrome</td>
      <td>67+</td>
    </tr><tr class="chrome_android yes">
      <td>Chrome Android</td>
      <td>67+</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox no">
      <td>Firefox</td>
      <td>No</td>
    </tr><tr class="firefox_android no">
      <td>Firefox Android</td>
      <td>No</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera yes">
      <td>Opera</td>
      <td>54+</td>
    </tr><tr class="opera_android yes">
      <td>Opera Android</td>
      <td>48+</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android yes">
      <td>Samsung Internet</td>
      <td>9.0+</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="magnetometer-0">
        <h3 id="magnetometer"><bdi class="secno">6.14 </bdi>
          Magnetometer
        <a class="self-link" aria-label="§" href="#magnetometer"></a></h3>
        <div class="issue" id="issue-container-number-11"><div role="heading" class="issue-title marker" id="h-issue-9" aria-level="4"><span>Issue 11</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-36">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-10">at risk</a>.
        </p></div>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-magnetometer" data-idl="enum-value" data-title="magnetometer" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>magnetometer</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/magnetometer/">Magnetometer</a></cite> API <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-37">powerful feature</a>.
        </p>
        <p data-cite="generic-sensor">
          Its <a data-link-type="dfn" href="#dfn-permission-revocation-algorithm" class="internalDFN" id="ref-for-dfn-permission-revocation-algorithm-6">permission revocation algorithm</a> is the result of calling
          <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/generic-sensor/#generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a> passing it
          "<a data-link-type="idl" href="#dom-permissionname-magnetometer" class="internalDFN" id="ref-for-dom-permissionname-magnetometer-2"><code>magnetometer</code></a>" as argument.
        </p>
      </section>
      <aside class="mdn"><details>
    <summary aria-label="Expand MDN details for display-capture"><span>MDN</span><span title="This feature has limited support.">🚫</span></summary>
    <a title="The HTTP Feature-Policy header display-capture directive controls whether or not the document is permitted to use Screen Capture API, that is, getDisplayMedia() to capture the screen's contents." href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/display-capture">Headers/Feature-Policy/display-capture</a>
    <p class="engines-some">This feature has limited support.</p>
    <table>
    <tr class="chrome no">
      <td>Chrome</td>
      <td>No</td>
    </tr><tr class="chrome_android no">
      <td>Chrome Android</td>
      <td>No</td>
    </tr><tr class="edge no">
      <td>Edge</td>
      <td>No</td>
    </tr><tr class="edge_mobile unknown">
      <td>Edge Mobile</td>
      <td>?</td>
    </tr><tr class="firefox yes">
      <td>Firefox</td>
      <td>67+</td>
    </tr><tr class="firefox_android yes">
      <td>Firefox Android</td>
      <td>67+</td>
    </tr><tr class="ie no">
      <td>Internet Explorer</td>
      <td>No</td>
    </tr><tr class="opera no">
      <td>Opera</td>
      <td>No</td>
    </tr><tr class="opera_android no">
      <td>Opera Android</td>
      <td>No</td>
    </tr><tr class="safari no">
      <td>Safari</td>
      <td>No</td>
    </tr><tr class="safari_ios no">
      <td>Safari iOS</td>
      <td>No</td>
    </tr><tr class="samsunginternet_android no">
      <td>Samsung Internet</td>
      <td>No</td>
    </tr><tr class="webview_android no">
      <td>WebView Android</td>
      <td>No</td>
    </tr>
  </table>
  </details></aside><section id="display-capture-0">
        <h3 id="display-capture"><bdi class="secno">6.15 </bdi>
          Display Capture
        <a class="self-link" aria-label="§" href="#display-capture"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-display-capture" data-idl="enum-value" data-title="display-capture" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>display-capture</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/screen-capture/">Screen Capture</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-38">powerful feature</a>.
        </p>
        <div class="issue" id="issue-container-number-12"><div role="heading" class="issue-title marker" id="h-issue-10" aria-level="4"><span>Issue 12</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-39">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-11">at risk</a>.
        </p></div>
        <dl>
          <dt>
            <a data-link-type="dfn" href="#dfn-permission-state-constraints" class="internalDFN" id="ref-for-dfn-permission-state-constraints-2">permission state constraints</a>
          </dt>
          <dd>
            Valid values for this descriptor's <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-18">permission state</a> are
            "<a data-link-type="idl" href="#dom-permissionstate-prompt" class="internalDFN" id="ref-for-dom-permissionstate-prompt-6"><code>prompt</code></a>" and "<a data-link-type="idl" href="#dom-permissionstate-denied" class="internalDFN" id="ref-for-dom-permissionstate-denied-15"><code>denied</code></a>". The user agent <em class="rfc2119">MUST NOT</em>
            ever set this descriptor's <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-19">permission state</a> to "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-10"><code>granted</code></a>".
          </dd>
        </dl>
      </section>
      <section id="nfc-0">
        <h3 id="nfc"><bdi class="secno">6.16 </bdi>
          NFC
        <a class="self-link" aria-label="§" href="#nfc"></a></h3>
        <div class="issue" id="issue-container-number-13"><div role="heading" class="issue-title marker" id="h-issue-11" aria-level="4"><span>Issue 13</span></div><p class="">
          This <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-40">powerful feature</a> only has a single implementation, and therefore, as per the <abbr title="World Wide Web Consortium">W3C</abbr>
          Process, it is <a data-link-type="dfn" href="#dfn-at-risk" class="internalDFN" id="ref-for-dfn-at-risk-12">at risk</a>.
        </p></div>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-nfc" data-idl="enum-value" data-title="nfc" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>nfc</code></dfn> enum value identifies the <cite><a href="https://w3c.github.io/web-nfc/">Web NFC API</a></cite> <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-41">powerful feature</a>.
        </p>
      </section>
      <section id="xr-spatial-tracking">
        <h3 id="xr-api"><bdi class="secno">6.17 </bdi>
          XR Spatial tracking
        <a class="self-link" aria-label="§" href="#xr-api"></a></h3>
        <p>
          The <dfn data-export="" data-dfn-type="enum-value" id="dom-permissionname-xr-spatial-tracking" data-idl="enum-value" data-title="xr-spatial-tracking" data-dfn-for="PermissionName" tabindex="0" aria-haspopup="dialog"><code>xr-spatial-tracking</code></dfn> enum value identifies the <cite><a href="https://www.w3.org/TR/webxr/">WebXR Device API</a></cite> Device API
          <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-42">powerful feature</a>.
        </p>
      </section>
    </section>
    <section id="conformance"><h2 id="x7-conformance"><bdi class="secno">7. </bdi>Conformance<a class="self-link" aria-label="§" href="#conformance"></a></h2><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">MUST NOT</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p></section>
    <section class="informative appendix" id="relationship-to-the-permissions-policy-specification">
      <h2 id="relationship-to-permissions-policy"><bdi class="secno">A. </bdi>
        Relationship to the Permissions Policy specification
      <a class="self-link" aria-label="§" href="#relationship-to-permissions-policy"></a></h2><p><em>This section is non-normative.</em></p>
      <p>
        Although technically this specification and the Permissions Policy specification
        ([<cite><a class="bibref" data-link-type="biblio" href="#bib-permissions-policy" title="Permissions Policy">Permissions-Policy</a></cite>]) deal with "permissions", each specification serves a distinct
        purpose in the platform. Nevertheless, the two specifications do explicity overlap.
      </p>
      <p>
        On the one hand, this specification exclusively concerns itself with <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-43">powerful features</a>
        whose access is managed through a user-agent mediated permissions UI (i.e., permissions
        where the user gives express consent before that feature can be used, and where the user
        retains the ability to deny that permission at any time for any reason). These powerful
        features are explicitly identified by this specification's <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-9"><code>PermissionName</code></a> enum.
      </p>
      <p>
        On the other hand, the Permissions Policy specification allows developers to selectively
        enable and disable <a data-link-type="dfn" href="#dfn-powerful-feature" class="internalDFN" id="ref-for-dfn-powerful-feature-44">powerful features</a> through a "<a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy">permissions policy</a>" (be it
        a HTTP header or a the <code><a data-type="element-attr" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow">allow</a></code> attribute). The APIs and features in scope for the
        Permissions Policy specification go beyond those identified in this specification's
        <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-10"><code>PermissionName</code></a> enum (e.g., "sync-xhr" and "gamepad"). In that sense, the Permissions
        Policy subsumes this specification in that Permissions Policy governs wether a feature is
        available at all, independently of this specification.
      </p>
      <p>
        A powerful feature that has been disabled by the Permissions Policy specification always
        has its permission state reflected as "denied" by this specification. This occurs because
        reading the current permission state relies on [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]'s "<a data-link-type="dfn" data-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a>" check, which
        itself calls into the Permissions Policy specification. Important to note here is the
        sharing of permission names across both specifications. Where this specifications has the
        <a data-link-type="idl" data-lt="PermissionName" href="#dom-permissionname" class="internalDFN" id="ref-for-dom-permissionname-11"><code>PermissionName</code></a> enum, the Permissions Policy specification relies on other
        specifications defining the names of the permissions (e.g., the permission "gamepad" is
        defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-gamepad" title="Gamepad">Gamepad</a></cite>], and so on).
      </p>
      <p>
        Finally, it's not possible for a powerful feature to ever become "granted" through any
        means provided by the Permissions Policy specification. The only way that a powerful
        feature can be "granted" is through a user-agent provided permission UI, or by some other
        user agent policy.
      </p>
    </section>
    <section class="appendix informative" id="automated-testing">
      <h2 id="automation"><bdi class="secno">B. </bdi>
        Automated testing
      <a class="self-link" aria-label="§" href="#automation"></a></h2><p><em>This section is non-normative.</em></p>
      <p>
        Automated testing of this specification is performed using the API provided by the <a href="https://w3c.github.io/permissions-automation/">Permissions Automation</a> document.
      </p>
    </section>
    <section class="appendix informative" id="security-and-privacy-considerations">
      <h2 id="privacy-considerations"><bdi class="secno">C. </bdi>
        Security and privacy considerations
      <a class="self-link" aria-label="§" href="#privacy-considerations"></a></h2><p><em>This section is non-normative.</em></p>
      <p>
        An adversary could use a <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-20">permission state</a> as an element in creating a "fingerprint"
        corresponding to an end-user. Although an adversary can already determine the state of a
        permission by actually using the API, that often leads to a permission request UI being
        presented to the end-user (if the permission was not already
        "<a data-link-type="idl" href="#dom-permissionstate-granted" class="internalDFN" id="ref-for-dom-permissionstate-granted-11"><code>granted</code></a>"). Thus, even though this API doesn't expose new
        fingerprinting information to websites, it makes it easier for an adversary to have
        discreet access to this information. Thus, implementations are encouraged to have an option
        for users to block (globally or selectively) the querying of <a href="#dfn-permission-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-state-21">permission states</a>.
      </p>
    </section>
    <section id="idl-index"><h2 id="d-idl-index"><bdi class="secno">D. </bdi>IDL Index<a class="self-link" aria-label="§" href="#idl-index"></a></h2><pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="Navigator">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlAttribute" data-title="permissions" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a href="#dfn-permission" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-8">Permissions</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="permissions" data-dfn-for="Navigator" data-type="Permissions" data-lt="permissions" data-local-lt="Navigator.permissions" class="idlName"><code>permissions</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="WorkerNavigator">

[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="WorkerNavigator" class="idlID" data-dfn-for="WorkerNavigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {<span data-idl="" class="idlAttribute" data-title="permissions" data-dfn-for="WorkerNavigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a href="#dfn-permission" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-permission-9">Permissions</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="permissions" data-dfn-for="WorkerNavigator" data-type="Permissions" data-lt="permissions" data-local-lt="WorkerNavigator.permissions" class="idlName"><code>permissions</code></dfn>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="Permissions">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>,<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="Permissions" data-dfn-for="Permissions" class="idlID"><code>Permissions</code></dfn> {<span data-idl="" class="idlMethod" data-title="query" data-dfn-for="Permissions"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-permissionstatus" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionstatus-13"><code>PermissionStatus</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-permissions-query" id="ref-for-dom-permissions-query-3"><code>query</code></a>(<span class="idlType"><a data-type="interface" href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlParamName">permissionDesc</span>);</span>
};</span><span data-idl="" class="idlDictionary" data-title="PermissionDescriptor">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PermissionDescriptor" data-dfn-for="PermissionDescriptor" class="idlID"><code>PermissionDescriptor</code></dfn> {<span data-idl="" class="idlMember" data-title="name" data-dfn-for="PermissionDescriptor">
  required<span class="idlType"> <a href="#dom-permissionname" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionname-12"><code>PermissionName</code></a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="name" data-dfn-for="PermissionDescriptor" data-type="PermissionName" class="idlName"><code>name</code></dfn>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PermissionStatus">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a>,<a data-lt="WorkerGlobalScope" data-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">Worker</a>)</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="PermissionStatus" data-dfn-for="PermissionStatus" class="idlID"><code>PermissionStatus</code></dfn> : <span class="idlSuperclass"><a data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" data-title="state" data-dfn-for="PermissionStatus">
  readonly attribute<span class="idlType"> <a href="#dom-permissionstate" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionstate-3"><code>PermissionState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state-2"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" data-title="name" data-dfn-for="PermissionStatus">
  readonly attribute<span class="idlType"> <a href="#dom-permissionname" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissionname-13"><code>PermissionName</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-name" id="ref-for-dom-permissionstatus-name-3"><code>name</code></a>;</span><span data-idl="" class="idlAttribute" data-title="onchange" data-dfn-for="PermissionStatus">
  attribute<span class="idlType"> <a data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-permissionstatus-onchange" id="ref-for-dom-permissionstatus-onchange-2"><code>onchange</code></a>;</span>
};</span><span data-idl="" class="idlEnum" data-title="PermissionState">

enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="PermissionState" data-dfn-for="PermissionState" class="idlID"><code>PermissionState</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-12"><code>granted</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-16"><code>denied</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-7"><code>prompt</code></a>"</span>,
};</span>

<span data-idl="" class="idlEnum" data-title="PermissionName">enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="PermissionName" data-dfn-for="PermissionName" class="idlID"><code>PermissionName</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-accelerometer" id="ref-for-dom-permissionname-accelerometer-3"><code>accelerometer</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-ambient-light-sensor" id="ref-for-dom-permissionname-ambient-light-sensor-3"><code>ambient-light-sensor</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-background-fetch" id="ref-for-dom-permissionname-background-fetch-2"><code>background-fetch</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-background-sync" id="ref-for-dom-permissionname-background-sync-2"><code>background-sync</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-3"><code>bluetooth</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-3"><code>camera</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-display-capture" id="ref-for-dom-permissionname-display-capture-2"><code>display-capture</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-3"><code>geolocation</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-gyroscope" id="ref-for-dom-permissionname-gyroscope-3"><code>gyroscope</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-magnetometer" id="ref-for-dom-permissionname-magnetometer-3"><code>magnetometer</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone-2"><code>microphone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-5"><code>midi</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-nfc" id="ref-for-dom-permissionname-nfc-2"><code>nfc</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-3"><code>notifications</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-persistent-storage" id="ref-for-dom-permissionname-persistent-storage-2"><code>persistent-storage</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-push" id="ref-for-dom-permissionname-push-2"><code>push</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-screen-wake-lock" id="ref-for-dom-permissionname-screen-wake-lock-2"><code>screen-wake-lock</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-speaker-selection" id="ref-for-dom-permissionname-speaker-selection-2"><code>speaker-selection</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-permissionname-xr-spatial-tracking" id="ref-for-dom-permissionname-xr-spatial-tracking-2"><code>xr-spatial-tracking</code></a>"</span>,
};</span>

<span data-idl="" class="idlDictionary" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="PushPermissionDescriptor" class="idlID"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-13"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor" data-type="boolean" class="idlName"><code>userVisibleOnly</code></dfn> = false;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="MidiPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="MidiPermissionDescriptor" data-dfn-for="MidiPermissionDescriptor" class="idlID"><code>MidiPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-14"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" data-title="sysex" data-dfn-for="MidiPermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="sysex" data-dfn-for="MidiPermissionDescriptor" data-type="boolean" class="idlName"><code>sysex</code></dfn> = false;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="DevicePermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="DevicePermissionDescriptor" data-dfn-for="DevicePermissionDescriptor" class="idlID"><code>DevicePermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-permissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-permissiondescriptor-15"><code>PermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" data-title="deviceId" data-dfn-for="DevicePermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="deviceId" data-dfn-for="DevicePermissionDescriptor" data-type="DOMString" class="idlName"><code>deviceId</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" data-title="CameraDevicePermissionDescriptor">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="CameraDevicePermissionDescriptor" data-dfn-for="CameraDevicePermissionDescriptor" class="idlID"><code>CameraDevicePermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a href="#dom-devicepermissiondescriptor" class="internalDFN" data-link-type="idl" id="ref-for-dom-devicepermissiondescriptor-2"><code>DevicePermissionDescriptor</code></a></span> {<span data-idl="" class="idlMember" data-title="panTiltZoom" data-dfn-for="CameraDevicePermissionDescriptor"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="panTiltZoom" data-dfn-for="CameraDevicePermissionDescriptor" data-type="boolean" class="idlName"><code>panTiltZoom</code></dfn> = false;</span>
};</span></code></pre></section>
    <section class="appendix informative" id="acknowledgments">
      <h2 class="no-num" id="e-acknowledgments"><bdi class="secno">E. </bdi>
        Acknowledgments
      <a class="self-link" aria-label="§" href="#acknowledgments"></a></h2><p><em>This section is non-normative.</em></p>
      <p>
        The editors would like to thank Adrienne Porter Felt, Anne van Kesteren, Domenic Denicola,
        Jake Archibald and Wendy Seltzer for their help with the API design and editorial work.
      </p>
    </section>
  

<section id="references" class="appendix"><h2 id="f-references"><bdi class="secno">F. </bdi>References<a class="self-link" aria-label="§" href="#references"></a></h2><section id="normative-references">
    <h3 id="f-1-normative-references"><bdi class="secno">F.1 </bdi>Normative references<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-accelerometer">[accelerometer]</dt><dd><a href="https://www.w3.org/TR/accelerometer/"><cite>Accelerometer</cite></a>. Anssi Kostiainen; Alexander Shalamov.  W3C. 24 July 2021. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/accelerometer/">https://www.w3.org/TR/accelerometer/</a></dd><dt id="bib-ambient-light">[ambient-light]</dt><dd><a href="https://www.w3.org/TR/ambient-light/"><cite>Ambient Light Sensor</cite></a>. Anssi Kostiainen; Rijubrata Bhaumik; Tobie Langel.  W3C. 16 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/ambient-light/">https://www.w3.org/TR/ambient-light/</a></dd><dt id="bib-audio-output">[audio-output]</dt><dd><a href="https://www.w3.org/TR/audio-output/"><cite>Audio Output Devices API</cite></a>. Justin Uberti; Guido Urdaneta; youenn fablet.  W3C. 6 July 2021. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/audio-output/">https://www.w3.org/TR/audio-output/</a></dd><dt id="bib-background-fetch">[background-fetch]</dt><dd><a href="https://wicg.github.io/background-fetch/"><cite>Background Fetch</cite></a>.  WICG. cg-draft. URL: <a href="https://wicg.github.io/background-fetch/">https://wicg.github.io/background-fetch/</a></dd><dt id="bib-dom">[dom]</dt><dd><a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a></dd><dt id="bib-ecmascript">[ECMASCRIPT]</dt><dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a></dd><dt id="bib-generic-sensor">[generic-sensor]</dt><dd><a href="https://www.w3.org/TR/generic-sensor/"><cite>Generic Sensor API</cite></a>. Rick Waldron; Mikhail Pozdnyakov; Alexander Shalamov; Tobie Langel.  W3C. 29 July 2021. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/generic-sensor/">https://www.w3.org/TR/generic-sensor/</a></dd><dt id="bib-geolocation">[Geolocation]</dt><dd><a href="https://www.w3.org/TR/geolocation/"><cite>Geolocation API</cite></a>. Marcos Caceres.  W3C. 12 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/geolocation/">https://www.w3.org/TR/geolocation/</a></dd><dt id="bib-getusermedia">[GETUSERMEDIA]</dt><dd><a href="https://www.w3.org/TR/mediacapture-streams/"><cite>Media Capture and Streams</cite></a>. Cullen Jennings; Bernard Aboba; Jan-Ivar Bruaroey; Henrik Boström; youenn fablet; Daniel Burnett; Adam Bergkvist; Anant Narayanan.  W3C. 19 August 2021. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mediacapture-streams/">https://www.w3.org/TR/mediacapture-streams/</a></dd><dt id="bib-gyroscope">[gyroscope]</dt><dd><a href="https://www.w3.org/TR/gyroscope/"><cite>Gyroscope</cite></a>. Anssi Kostiainen; Mikhail Pozdnyakov.  W3C. 24 July 2021. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/gyroscope/">https://www.w3.org/TR/gyroscope/</a></dd><dt id="bib-html">[HTML]</dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd><dt id="bib-infra">[infra]</dt><dd><a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a></dd><dt id="bib-magnetometer">[magnetometer]</dt><dd><a href="https://www.w3.org/TR/magnetometer/"><cite>Magnetometer</cite></a>. Anssi Kostiainen; Rijubrata Bhaumik.  W3C. 24 July 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/magnetometer/">https://www.w3.org/TR/magnetometer/</a></dd><dt id="bib-notifications">[notifications]</dt><dd><a href="https://notifications.spec.whatwg.org/"><cite>Notifications API Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a></dd><dt id="bib-permissions-policy">[Permissions-Policy]</dt><dd><a href="https://www.w3.org/TR/permissions-policy-1/"><cite>Permissions Policy</cite></a>. Ian Clelland.  W3C. 16 July 2020. W3C Working Draft. URL: <a href="https://www.w3.org/TR/permissions-policy-1/">https://www.w3.org/TR/permissions-policy-1/</a></dd><dt id="bib-push-api">[push-api]</dt><dd><a href="https://www.w3.org/TR/push-api/"><cite>Push API</cite></a>. Peter Beverloo; Martin Thomson.  W3C. 16 June 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/push-api/">https://www.w3.org/TR/push-api/</a></dd><dt id="bib-rfc2119">[RFC2119]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a></dd><dt id="bib-rfc8174">[RFC8174]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a></dd><dt id="bib-screen-capture">[screen-capture]</dt><dd><a href="https://www.w3.org/TR/screen-capture/"><cite>Screen Capture</cite></a>. Martin Thomson; Keith Griffin; Suhas Nandakumar; Henrik Boström; Jan-Ivar Bruaroey; Elad Alon.  W3C. 10 June 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/screen-capture/">https://www.w3.org/TR/screen-capture/</a></dd><dt id="bib-screen-wake-lock">[screen-wake-lock]</dt><dd><a href="https://www.w3.org/TR/screen-wake-lock/"><cite>Screen Wake Lock API</cite></a>. Kenneth Christiansen; Marcos Caceres; Raphael Kubo da Costa; Ilya Bogdanovich; Andrey Logvinov.  W3C. 26 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/screen-wake-lock/">https://www.w3.org/TR/screen-wake-lock/</a></dd><dt id="bib-storage">[storage]</dt><dd><a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a></dd><dt id="bib-web-background-sync">[web-background-sync]</dt><dd><a href="https://wicg.github.io/background-sync/spec/"><cite>Web Background Synchronization</cite></a>.  WICG. cg-draft. URL: <a href="https://wicg.github.io/background-sync/spec/">https://wicg.github.io/background-sync/spec/</a></dd><dt id="bib-web-bluetooth">[web-bluetooth]</dt><dd><a href="https://webbluetoothcg.github.io/web-bluetooth/"><cite>Web Bluetooth</cite></a>. Jeffrey Yasskin.  W3C Web Bluetooth Community Group. Draft Community Group Report. URL: <a href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a></dd><dt id="bib-web-nfc">[web-nfc]</dt><dd><a href="https://w3c.github.io/web-nfc/"><cite>Web NFC API</cite></a>.  W3C. W3C Editor's Draft. URL: <a href="https://w3c.github.io/web-nfc/">https://w3c.github.io/web-nfc/</a></dd><dt id="bib-webidl">[WebIDL]</dt><dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. Boris Zbarsky.  W3C. 15 December 2016. W3C Editor's Draft. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd><dt id="bib-webmidi">[webmidi]</dt><dd><a href="https://www.w3.org/TR/webmidi/"><cite>Web MIDI API</cite></a>. Chris Wilson; Jussi Kalliokoski.  W3C. 17 March 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/webmidi/">https://www.w3.org/TR/webmidi/</a></dd><dt id="bib-webxr">[webxr]</dt><dd><a href="https://www.w3.org/TR/webxr/"><cite>WebXR Device API</cite></a>. Brandon Jones; Manish Goregaokar; Rik Cabanier; Nell Waliczek.  W3C. 24 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/webxr/">https://www.w3.org/TR/webxr/</a></dd></dl>
  </section><section id="informative-references">
    <h3 id="f-2-informative-references"><bdi class="secno">F.2 </bdi>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-appmanifest">[appmanifest]</dt><dd><a href="https://www.w3.org/TR/appmanifest/"><cite>Web Application Manifest</cite></a>. Marcos Caceres; Kenneth Christiansen; Anssi Kostiainen; Matt Giuca; Aaron Gustafson.  W3C. 25 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/appmanifest/">https://www.w3.org/TR/appmanifest/</a></dd><dt id="bib-gamepad">[Gamepad]</dt><dd><a href="https://www.w3.org/TR/gamepad/"><cite>Gamepad</cite></a>. Steve Agoston; James Hollyer; Matthew Reynolds; Brandon Jones; Scott Graham; Theodore Mielczarek.  W3C. 5 August 2021. W3C Working Draft. URL: <a href="https://www.w3.org/TR/gamepad/">https://www.w3.org/TR/gamepad/</a></dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-at-risk" aria-label="Links in this document to definition: at risk">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-at-risk" aria-label="Permalink for definition: at risk. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-at-risk-1" title="§ 6.4 Midi">§ 6.4 Midi</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-2" title="§ 6.5 Screen wake lock">§ 6.5 Screen wake lock</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-3" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-4" title="§ 6.7 Background Fetch">§ 6.7 Background Fetch</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-5" title="§ 6.8 Background Sync">§ 6.8 Background Sync</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-6" title="§ 6.9 Bluetooth">§ 6.9 Bluetooth</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-7" title="§ 6.11 Ambient Light Sensor">§ 6.11 Ambient Light Sensor</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-8" title="§ 6.12 Accelerometer">§ 6.12 Accelerometer</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-9" title="§ 6.13 Gyroscope">§ 6.13 Gyroscope</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-10" title="§ 6.14 Magnetometer">§ 6.14 Magnetometer</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-11" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> 
  </li><li>
    <a href="#ref-for-dfn-at-risk-12" title="§ 6.16 NFC">§ 6.16 NFC</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission" aria-label="Links in this document to definition: permission">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission" aria-label="Permalink for definition: permission. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-1" title="§ 2. Model">§ 2. Model</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-2" title="§ 2.1 Permissions">§ 2.1 Permissions</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-3" title="§ 2.2 Powerful features">§ 2.2 Powerful features</a> <a href="#ref-for-dfn-permission-4" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-5" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-6" title="§ 3. Extensions to the Navigator and WorkerNavigator interfaces">§ 3. Extensions to the Navigator and WorkerNavigator interfaces</a> <a href="#ref-for-dfn-permission-7" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-8" title="§ D. IDL Index">§ D. IDL Index</a> <a href="#ref-for-dfn-permission-9" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-states" aria-label="Links in this document to definition: states">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-states" aria-label="Permalink for definition: states. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-prompt" aria-label="Links in this document to definition: Prompt">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-prompt" aria-label="Permalink for definition: Prompt. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-prompt-1" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-granted" aria-label="Links in this document to definition: Granted">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-granted" aria-label="Permalink for definition: Granted. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-granted-1" title="§ 2.2 Powerful features">§ 2.2 Powerful features</a> <a href="#ref-for-dfn-granted-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-granted-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-granted-4" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-denied" aria-label="Links in this document to definition: Denied">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-denied" aria-label="Permalink for definition: Denied. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-denied-1" title="§ 2.1 Permissions">§ 2.1 Permissions</a> 
  </li><li>
    <a href="#ref-for-dfn-denied-2" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-new-information-about-the-user-s-intent" aria-label="Links in this document to definition: new information about the user's intent">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-new-information-about-the-user-s-intent" aria-label="Permalink for definition: new information about the user's intent. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-new-information-about-the-user-s-intent-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-new-information-about-the-user-s-intent-2" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> 
  </li><li>
    <a href="#ref-for-dfn-new-information-about-the-user-s-intent-3" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-new-information-about-the-user-s-intent-4" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> <a href="#ref-for-dfn-new-information-about-the-user-s-intent-5" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-implicit-signals" aria-label="Links in this document to definition: implicit signals">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-implicit-signals" aria-label="Permalink for definition: implicit signals. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-implicit-signals-1" title="§ 2.1 Permissions">§ 2.1 Permissions</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-powerful-feature" aria-label="Links in this document to definition: powerful feature">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-powerful-feature" aria-label="Permalink for definition: powerful feature. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-powerful-feature-1" title="§ 2. Model">§ 2. Model</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-2" title="§ 2.1 Permissions">§ 2.1 Permissions</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-3" title="§ 2.2 Powerful features">§ 2.2 Powerful features</a> <a href="#ref-for-dfn-powerful-feature-4" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-5" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-powerful-feature-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-powerful-feature-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-powerful-feature-8" title="Reference 4">(4)</a> <a href="#ref-for-dfn-powerful-feature-9" title="Reference 5">(5)</a> <a href="#ref-for-dfn-powerful-feature-10" title="Reference 6">(6)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-11" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> <a href="#ref-for-dfn-powerful-feature-12" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-13" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-14" title="§ 2.6 Reacting to users revoking permission">§ 2.6 Reacting to users revoking permission</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-15" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-16" title="§ 6.1 Geolocation">§ 6.1 Geolocation</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-17" title="§ 6.2 Notifications">§ 6.2 Notifications</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-18" title="§ 6.3 Push">§ 6.3 Push</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-19" title="§ 6.4 Midi">§ 6.4 Midi</a> <a href="#ref-for-dfn-powerful-feature-20" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-21" title="§ 6.5 Screen wake lock">§ 6.5 Screen wake lock</a> <a href="#ref-for-dfn-powerful-feature-22" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-23" title="§ 6.7 Background Fetch">§ 6.7 Background Fetch</a> <a href="#ref-for-dfn-powerful-feature-24" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-25" title="§ 6.8 Background Sync">§ 6.8 Background Sync</a> <a href="#ref-for-dfn-powerful-feature-26" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-27" title="§ 6.9 Bluetooth">§ 6.9 Bluetooth</a> <a href="#ref-for-dfn-powerful-feature-28" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-29" title="§ 6.10 Persistent Storage">§ 6.10 Persistent Storage</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-30" title="§ 6.11 Ambient Light Sensor">§ 6.11 Ambient Light Sensor</a> <a href="#ref-for-dfn-powerful-feature-31" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-32" title="§ 6.12 Accelerometer">§ 6.12 Accelerometer</a> <a href="#ref-for-dfn-powerful-feature-33" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-34" title="§ 6.13 Gyroscope">§ 6.13 Gyroscope</a> <a href="#ref-for-dfn-powerful-feature-35" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-36" title="§ 6.14 Magnetometer">§ 6.14 Magnetometer</a> <a href="#ref-for-dfn-powerful-feature-37" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-38" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> <a href="#ref-for-dfn-powerful-feature-39" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-40" title="§ 6.16 NFC">§ 6.16 NFC</a> <a href="#ref-for-dfn-powerful-feature-41" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-42" title="§ 6.17 XR Spatial tracking">§ 6.17 XR Spatial tracking</a> 
  </li><li>
    <a href="#ref-for-dfn-powerful-feature-43" title="§ A. Relationship to the Permissions Policy specification">§ A. Relationship to the Permissions Policy specification</a> <a href="#ref-for-dfn-powerful-feature-44" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-name" aria-label="Links in this document to definition: name">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-name" aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-allowed-in-non-secure-contexts" aria-label="Links in this document to definition: allowed in non-secure contexts">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-allowed-in-non-secure-contexts" aria-label="Permalink for definition: allowed in non-secure contexts. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-allowed-in-non-secure-contexts-1" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> 
  </li><li>
    <a href="#ref-for-dfn-allowed-in-non-secure-contexts-2" title="§ 6.2 Notifications">§ 6.2 Notifications</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-descriptor-type" aria-label="Links in this document to definition: permission descriptor type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-descriptor-type" aria-label="Permalink for definition: permission descriptor type. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-descriptor-type-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-2" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> <a href="#ref-for-dfn-permission-descriptor-type-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-permission-descriptor-type-4" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-5" title="§ 4.1 query() method">§ 4.1 query() method</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-6" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-7" title="§ 6.3 Push">§ 6.3 Push</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-8" title="§ 6.4 Midi">§ 6.4 Midi</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-descriptor-type-9" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-stronger-than" aria-label="Links in this document to definition: stronger than">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-stronger-than" aria-label="Permalink for definition: stronger than. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-stronger-than-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-stronger-than-2" title="§ 6.3 Push">§ 6.3 Push</a> 
  </li><li>
    <a href="#ref-for-dfn-stronger-than-3" title="§ 6.4 Midi">§ 6.4 Midi</a> 
  </li><li>
    <a href="#ref-for-dfn-stronger-than-4" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-state-constraints" aria-label="Links in this document to definition: permission state constraints">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-state-constraints" aria-label="Permalink for definition: permission state constraints. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-state-constraints-1" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-constraints-2" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-extra-permission-data-type" aria-label="Links in this document to definition: extra permission data type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-extra-permission-data-type" aria-label="Permalink for definition: extra permission data type. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-extra-permission-data-type-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-extra-permission-data-type-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-extra-permission-data-type-3" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-extra-permission-data" aria-label="Links in this document to definition: extra permission data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-extra-permission-data" aria-label="Permalink for definition: extra permission data. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-extra-permission-data-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-extra-permission-data-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-extra-permission-data-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-extra-permission-data-4" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-extra-permission-data-constraints" aria-label="Links in this document to definition: extra permission data constraints">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-extra-permission-data-constraints" aria-label="Permalink for definition: extra permission data constraints. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-extra-permission-data-constraints-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-result-type" aria-label="Links in this document to definition: permission result type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-result-type" aria-label="Permalink for definition: permission result type. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-result-type-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-permission-result-type-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-result-type-3" title="§ 5.1 Creating instances">§ 5.1 Creating instances</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-query-algorithm" aria-label="Links in this document to definition: permission query algorithm">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-query-algorithm" aria-label="Permalink for definition: permission query algorithm. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-query-algorithm-1" title="§ 4.1 query() method">§ 4.1 query() method</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-query-algorithm-2" title="§ 5.4 onchange attribute">§ 5.4 onchange attribute</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-query-algorithm-3" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-default-permission-query-algorithm" aria-label="Links in this document to definition: default permission query algorithm">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-permission-query-algorithm" aria-label="Permalink for definition: default permission query algorithm. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-default-permission-query-algorithm-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-revocation-algorithm" aria-label="Links in this document to definition: permission revocation algorithm">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-revocation-algorithm" aria-label="Permalink for definition: permission revocation algorithm. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-1" title="§ 2.6 Reacting to users revoking permission">§ 2.6 Reacting to users revoking permission</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-2" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-3" title="§ 6.11 Ambient Light Sensor">§ 6.11 Ambient Light Sensor</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-4" title="§ 6.12 Accelerometer">§ 6.12 Accelerometer</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-5" title="§ 6.13 Gyroscope">§ 6.13 Gyroscope</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-revocation-algorithm-6" title="§ 6.14 Magnetometer">§ 6.14 Magnetometer</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-default-powerful-feature" aria-label="Links in this document to definition: default powerful feature">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-powerful-feature" aria-label="Permalink for definition: default powerful feature. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-default-powerful-feature-1" title="§ 6.1 Geolocation">§ 6.1 Geolocation</a> 
  </li><li>
    <a href="#ref-for-dfn-default-powerful-feature-2" title="§ 6.2 Notifications">§ 6.2 Notifications</a> 
  </li><li>
    <a href="#ref-for-dfn-default-powerful-feature-3" title="§ 6.5 Screen wake lock">§ 6.5 Screen wake lock</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-aspects" aria-label="Links in this document to definition: aspects">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-aspects" aria-label="Permalink for definition: aspects. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-aspects-1" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permission-state" aria-label="Links in this document to definition: permission state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permission-state" aria-label="Permalink for definition: permission state. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permission-state-1" title="§ 2.1 Permissions">§ 2.1 Permissions</a> <a href="#ref-for-dfn-permission-state-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-permission-state-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-4" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-permission-state-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-permission-state-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-permission-state-7" title="Reference 4">(4)</a> <a href="#ref-for-dfn-permission-state-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-permission-state-9" title="Reference 6">(6)</a> <a href="#ref-for-dfn-permission-state-10" title="Reference 7">(7)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-11" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> <a href="#ref-for-dfn-permission-state-12" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-13" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-14" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> <a href="#ref-for-dfn-permission-state-15" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-16" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> <a href="#ref-for-dfn-permission-state-17" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-18" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> <a href="#ref-for-dfn-permission-state-19" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-permission-state-20" title="§ C. Security and privacy considerations">§ C. Security and privacy considerations</a> <a href="#ref-for-dfn-permission-state-21" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-request-permission-to-use" aria-label="Links in this document to definition: request permission to use">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-request-permission-to-use" aria-label="Permalink for definition: request permission to use. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-request-permission-to-use-1" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> <a href="#ref-for-dfn-request-permission-to-use-2" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-prompt-the-user-to-choose" aria-label="Links in this document to definition: prompt the user to choose">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-prompt-the-user-to-choose" aria-label="Permalink for definition: prompt the user to choose. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-prompt-the-user-to-choose-1" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> <a href="#ref-for-dfn-prompt-the-user-to-choose-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-prompt-the-user-to-choose-3" title="Reference 3">(3)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-react-to-the-user-revoking-permission" aria-label="Links in this document to definition: react to the user revoking permission">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-react-to-the-user-revoking-permission" aria-label="Permalink for definition: react to the user revoking permission. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-react-to-the-user-revoking-permission-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dfn-react-to-the-user-revoking-permission-2" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator-permissions" aria-label="Links in this document to definition: permissions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-navigator-permissions" aria-label="Permalink for definition: permissions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-workernavigator-permissions" aria-label="Links in this document to definition: permissions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-workernavigator-permissions" aria-label="Permalink for definition: permissions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissions" aria-label="Links in this document to definition: Permissions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissions" aria-label="Permalink for definition: Permissions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissiondescriptor" aria-label="Links in this document to definition: PermissionDescriptor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissiondescriptor" aria-label="Permalink for definition: PermissionDescriptor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissiondescriptor-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissiondescriptor-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissiondescriptor-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-4" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-5" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-6" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-7" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-8" title="§ 4.1 query() method">§ 4.1 query() method</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-9" title="§ 5.1 Creating instances">§ 5.1 Creating instances</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-10" title="§ 6.3 Push">§ 6.3 Push</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-11" title="§ 6.4 Midi">§ 6.4 Midi</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-12" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-13" title="§ D. IDL Index">§ D. IDL Index</a> <a href="#ref-for-dom-permissiondescriptor-14" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissiondescriptor-15" title="Reference 3">(3)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissiondescriptor-name" aria-label="Links in this document to definition: name">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissiondescriptor-name" aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissiondescriptor-name-1" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> <a href="#ref-for-dom-permissiondescriptor-name-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissiondescriptor-name-3" title="Reference 3">(3)</a> <a href="#ref-for-dom-permissiondescriptor-name-4" title="Reference 4">(4)</a> <a href="#ref-for-dom-permissiondescriptor-name-5" title="Reference 5">(5)</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-6" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-7" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-8" title="§ 4.1 query() method">§ 4.1 query() method</a> <a href="#ref-for-dom-permissiondescriptor-name-9" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-10" title="§ 5.1 Creating instances">§ 5.1 Creating instances</a> <a href="#ref-for-dom-permissiondescriptor-name-11" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-12" title="§ 5.4 onchange attribute">§ 5.4 onchange attribute</a> 
  </li><li>
    <a href="#ref-for-dom-permissiondescriptor-name-13" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissions-query" aria-label="Links in this document to definition: query()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissions-query" aria-label="Permalink for definition: query(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-402168873">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissions-query-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissions-query-2" title="§ 4. Permissions interface">§ 4. Permissions interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissions-query-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-query-a-permission" aria-label="Links in this document to definition: query a permission">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-query-a-permission" aria-label="Permalink for definition: query a permission. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstatus" aria-label="Links in this document to definition: PermissionStatus">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstatus" aria-label="Permalink for definition: PermissionStatus. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstatus-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissionstatus-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissionstatus-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-4" title="§ 4. Permissions interface">§ 4. Permissions interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-5" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-6" title="§ 5.4 onchange attribute">§ 5.4 onchange attribute</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-7" title="§ 5.5 Garbage collection">§ 5.5 Garbage collection</a> <a href="#ref-for-dom-permissionstatus-8" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissionstatus-9" title="Reference 3">(3)</a> <a href="#ref-for-dom-permissionstatus-10" title="Reference 4">(4)</a> <a href="#ref-for-dom-permissionstatus-11" title="Reference 5">(5)</a> <a href="#ref-for-dom-permissionstatus-12" title="Reference 6">(6)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-13" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstate" aria-label="Links in this document to definition: PermissionState">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstate" aria-label="Permalink for definition: PermissionState. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstate-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-2" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-query" aria-label="Links in this document to definition: [[query]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-query" aria-label="Permalink for definition: [[query]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-query-1" title="§ 4.1 query() method">§ 4.1 query() method</a> <a href="#ref-for-dfn-query-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-query-3" title="§ 5.1 Creating instances">§ 5.1 Creating instances</a> 
  </li><li>
    <a href="#ref-for-dfn-query-4" title="§ 5.4 onchange attribute">§ 5.4 onchange attribute</a> <a href="#ref-for-dfn-query-5" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstate-granted" aria-label="Links in this document to definition: granted">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstate-granted" aria-label="Permalink for definition: granted. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstate-granted-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissionstate-granted-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-3" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> <a href="#ref-for-dom-permissionstate-granted-4" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-5" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> <a href="#ref-for-dom-permissionstate-granted-6" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-7" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-8" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-9" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-10" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-11" title="§ C. Security and privacy considerations">§ C. Security and privacy considerations</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-granted-12" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstate-denied" aria-label="Links in this document to definition: denied">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstate-denied" aria-label="Permalink for definition: denied. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstate-denied-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissionstate-denied-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-3" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> <a href="#ref-for-dom-permissionstate-denied-4" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissionstate-denied-5" title="Reference 3">(3)</a> <a href="#ref-for-dom-permissionstate-denied-6" title="Reference 4">(4)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-7" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> <a href="#ref-for-dom-permissionstate-denied-8" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-9" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> <a href="#ref-for-dom-permissionstate-denied-10" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissionstate-denied-11" title="Reference 3">(3)</a> <a href="#ref-for-dom-permissionstate-denied-12" title="Reference 4">(4)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-13" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-14" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-15" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-denied-16" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstate-prompt" aria-label="Links in this document to definition: prompt">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstate-prompt" aria-label="Permalink for definition: prompt. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstate-prompt-1" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> <a href="#ref-for-dom-permissionstate-prompt-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-prompt-3" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-prompt-4" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-prompt-5" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-prompt-6" title="§ 6.15 Display Capture">§ 6.15 Display Capture</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstate-prompt-7" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-create-a-permissionstatus" aria-label="Links in this document to definition: create a PermissionStatus">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-create-a-permissionstatus" aria-label="Permalink for definition: create a PermissionStatus. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-create-a-permissionstatus-1" title="§ 4.1 query() method">§ 4.1 query() method</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstatus-name" aria-label="Links in this document to definition: name">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstatus-name" aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstatus-name-1" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-name-2" title="§ 5.1 Creating instances">§ 5.1 Creating instances</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-name-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstatus-state" aria-label="Links in this document to definition: state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstatus-state" aria-label="Permalink for definition: state. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstatus-state-1" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-state-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionstatus-onchange" aria-label="Links in this document to definition: onchange">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionstatus-onchange" aria-label="Permalink for definition: onchange. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-717592932">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionstatus-onchange-1" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionstatus-onchange-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permissionstatus-update-steps" aria-label="Links in this document to definition: PermissionStatus update steps">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permissionstatus-update-steps" aria-label="Permalink for definition: PermissionStatus update steps. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permissionstatus-update-steps-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permissions-task-source" aria-label="Links in this document to definition: permissions task source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-permissions-task-source" aria-label="Permalink for definition: permissions task source. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-permissions-task-source-1" title="§ 5.5 Garbage collection">§ 5.5 Garbage collection</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname" aria-label="Links in this document to definition: PermissionName">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname" aria-label="Permalink for definition: PermissionName. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissionname-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-3" title="§ 2.3 Reading the current permission state">§ 2.3 Reading the current permission state</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-4" title="§ 2.4 Requesting permission to use a powerful feature">§ 2.4 Requesting permission to use a powerful feature</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-5" title="§ 2.5 Prompt the user to choose">§ 2.5 Prompt the user to choose</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-6" title="§ 4. Permissions interface">§ 4. Permissions interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-7" title="§ 5. PermissionStatus interface">§ 5. PermissionStatus interface</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-8" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-9" title="§ A. Relationship to the Permissions Policy specification">§ A. Relationship to the Permissions Policy specification</a> <a href="#ref-for-dom-permissionname-10" title="Reference 2">(2)</a> <a href="#ref-for-dom-permissionname-11" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-12" title="§ D. IDL Index">§ D. IDL Index</a> <a href="#ref-for-dom-permissionname-13" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-geolocation" aria-label="Links in this document to definition: geolocation">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-geolocation" aria-label="Permalink for definition: geolocation. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-geolocation-1" title="§ 1. Examples of usage">§ 1. Examples of usage</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-geolocation-2" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-geolocation-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-notifications" aria-label="Links in this document to definition: notifications">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-notifications" aria-label="Permalink for definition: notifications. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-notifications-1" title="§ 1. Examples of usage">§ 1. Examples of usage</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-notifications-2" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-notifications-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-push" aria-label="Links in this document to definition: push">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-push" aria-label="Permalink for definition: push. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-push-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-push-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushpermissiondescriptor" aria-label="Links in this document to definition: PushPermissionDescriptor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pushpermissiondescriptor" aria-label="Permalink for definition: PushPermissionDescriptor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushpermissiondescriptor-uservisibleonly" aria-label="Links in this document to definition: userVisibleOnly">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly" aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-midi" aria-label="Links in this document to definition: midi">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-midi" aria-label="Permalink for definition: midi. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-midi-1" title="§ 2.2.1 Specifying a powerful feature">§ 2.2.1 Specifying a powerful feature</a> <a href="#ref-for-dom-permissionname-midi-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-midi-3" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-midi-4" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-midi-5" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-midipermissiondescriptor" aria-label="Links in this document to definition: MidiPermissionDescriptor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-midipermissiondescriptor" aria-label="Permalink for definition: MidiPermissionDescriptor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-midipermissiondescriptor-sysex" aria-label="Links in this document to definition: sysex">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-midipermissiondescriptor-sysex" aria-label="Permalink for definition: sysex. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-screen-wake-lock" aria-label="Links in this document to definition: screen-wake-lock">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-screen-wake-lock" aria-label="Permalink for definition: screen-wake-lock. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-screen-wake-lock-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-screen-wake-lock-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-camera" aria-label="Links in this document to definition: camera">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-camera" aria-label="Permalink for definition: camera. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-camera-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-camera-2" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-camera-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-microphone" aria-label="Links in this document to definition: microphone">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-microphone" aria-label="Permalink for definition: microphone. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-microphone-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-microphone-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-speaker-selection" aria-label="Links in this document to definition: speaker-selection">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-speaker-selection" aria-label="Permalink for definition: speaker-selection. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-speaker-selection-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-speaker-selection-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-devicepermissiondescriptor" aria-label="Links in this document to definition: DevicePermissionDescriptor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-devicepermissiondescriptor" aria-label="Permalink for definition: DevicePermissionDescriptor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-devicepermissiondescriptor-1" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> 
  </li><li>
    <a href="#ref-for-dom-devicepermissiondescriptor-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-devicepermissiondescriptor-deviceid" aria-label="Links in this document to definition: deviceId">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-devicepermissiondescriptor-deviceid" aria-label="Permalink for definition: deviceId. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-1" title="§ 6.6 Media Devices">§ 6.6 Media Devices</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-3" title="Reference 3">(3)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-4" title="Reference 4">(4)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-5" title="Reference 5">(5)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-6" title="Reference 6">(6)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-7" title="Reference 7">(7)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-cameradevicepermissiondescriptor" aria-label="Links in this document to definition: CameraDevicePermissionDescriptor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-cameradevicepermissiondescriptor" aria-label="Permalink for definition: CameraDevicePermissionDescriptor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-cameradevicepermissiondescriptor-pantiltzoom" aria-label="Links in this document to definition: panTiltZoom">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-cameradevicepermissiondescriptor-pantiltzoom" aria-label="Permalink for definition: panTiltZoom. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-background-fetch" aria-label="Links in this document to definition: background-fetch">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-background-fetch" aria-label="Permalink for definition: background-fetch. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-background-fetch-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-background-fetch-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-background-sync" aria-label="Links in this document to definition: background-sync">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-background-sync" aria-label="Permalink for definition: background-sync. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-background-sync-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-background-sync-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-bluetooth" aria-label="Links in this document to definition: bluetooth">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-bluetooth" aria-label="Permalink for definition: bluetooth. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-bluetooth-1" title="§ 2.2.2 Aspects">§ 2.2.2 Aspects</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-bluetooth-2" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-bluetooth-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-persistent-storage" aria-label="Links in this document to definition: persistent-storage">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-persistent-storage" aria-label="Permalink for definition: persistent-storage. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-persistent-storage-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-persistent-storage-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-ambient-light-sensor" aria-label="Links in this document to definition: ambient-light-sensor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-ambient-light-sensor" aria-label="Permalink for definition: ambient-light-sensor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-ambient-light-sensor-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-ambient-light-sensor-2" title="§ 6.11 Ambient Light Sensor">§ 6.11 Ambient Light Sensor</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-ambient-light-sensor-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-accelerometer" aria-label="Links in this document to definition: accelerometer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-accelerometer" aria-label="Permalink for definition: accelerometer. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-accelerometer-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-accelerometer-2" title="§ 6.12 Accelerometer">§ 6.12 Accelerometer</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-accelerometer-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-gyroscope" aria-label="Links in this document to definition: gyroscope">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-gyroscope" aria-label="Permalink for definition: gyroscope. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-gyroscope-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-gyroscope-2" title="§ 6.13 Gyroscope">§ 6.13 Gyroscope</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-gyroscope-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-magnetometer" aria-label="Links in this document to definition: magnetometer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-magnetometer" aria-label="Permalink for definition: magnetometer. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-magnetometer-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-magnetometer-2" title="§ 6.14 Magnetometer">§ 6.14 Magnetometer</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-magnetometer-3" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-display-capture" aria-label="Links in this document to definition: display-capture">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-display-capture" aria-label="Permalink for definition: display-capture. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-display-capture-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-display-capture-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-nfc" aria-label="Links in this document to definition: nfc">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-nfc" aria-label="Permalink for definition: nfc. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-nfc-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-nfc-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-permissionname-xr-spatial-tracking" aria-label="Links in this document to definition: xr-spatial-tracking">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-permissionname-xr-spatial-tracking" aria-label="Permalink for definition: xr-spatial-tracking. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1342630210">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-permissionname-xr-spatial-tracking-1" title="§ 6. Powerful features registry">§ 6. Powerful features registry</a> 
  </li><li>
    <a href="#ref-for-dom-permissionname-xr-spatial-tracking-2" title="§ D. IDL Index">§ D. IDL Index</a> 
  </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>